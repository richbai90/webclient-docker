{"espForm":{"configuration":{"settings":{"name":"service_search_permission","title":"Service Permissions","options":{"allowResize":"true","showMenubar":"false","showToolbar":"true","showStatusBar":"false"}},"tables":{"table":{"name":"sc_subscription","type":"Main Details Table","flags":"2"}},"javascript":{"methods":{"method":[{"name":"(Globals)","code":"var boolFigureChanged = false;\nvar origValueSub = \"\";\nvar origValueReq = \"\";\nfunction MF()\n{\n\treturn mainform;\n}\n\nfunction ServSubs()\n{\n\treturn _swdoc.sc_subscription;\n}\n\n\nfunction setup_form_fields()\n{\n\t\/\/-- None of the below fields exist on the form\n\t\/*var boolAllowEdit = _swdoc.MF().fld_chargable.value==1;\n\t_een(_swdoc.MF().fld_unit_charge,boolAllowEdit);\n\t_een(_swdoc.MF().fld_mark_up,boolAllowEdit);\n\t_een(_swdoc.MF().fld_units,boolAllowEdit);*\/\n\t\n\t\n\t_swdoc.origValueSub = sc_subscription.subscription_price;\n\t_swdoc.origValueReq = sc_subscription.request_price;\n\t\n\t\/\/-- Below timer calls _swdoc.checkSLAs function that manipulates a table that no longer exists on the form\n\t\/\/mainform.SetTimer(1, 10);\n}\n\nfunction recalculate()\n{\n\tvar strRev = parseFloat(_swdoc.ServSubs().unit_charge)*parseFloat(_swdoc.ServSubs().units)*((100+parseFloat(_swdoc.ServSubs().mark_up))\/100);\n\tstrRev = String(strRev);\n\tvar strIndex = strRev.indexOf(\".\",0);\n\tif(strIndex>-1){\n\t\tvar strCharge = strRev.substr(0, strIndex+3);\n\t\t\n\t\t\/\/MessageBox( strRev.substr(strIndex+3,1 ));\n\t\t\n\t\tif((strIndex+3)-strCharge.length)\n\t\t\tstrCharge += \"0\";\n\t\t_swdoc.ServSubs().total_charge = strCharge;\n\t}else\n\t{\n\t\t_swdoc.ServSubs().total_charge = strRev+\".00\";\n\t}\n\n\t_swdoc.UpdateFormFromData();\n}\n\nfunction checkSLAs()\n{\n\t_swdoc.MF().sl_service_sla1.Refresh();\n\tvar strSLAs = app.service.get_subscription_slas(_swdoc.ServSubs().pk_auto_id);\n\tvar arrSLA = strSLAs.split(\",\");\n\tfor(var x = 0;x<arrSLA.length;x++)\n\t{\n\t\tvar strSLAName = arrSLA[x];\n\t\tvar intRow = app.g.sl_findrow_byvalue(_swdoc.MF().sl_service_sla1,strSLAName,'fk_sla');\n\t\tif(intRow>-1)\n\t\t{\n\t\t\t_swdoc.MF().sl_service_sla1.SetRowChecked(intRow, true);\n\t\t}\n\t}\n\n\treturn true;\n}"},{"name":"OnDataSaved","code":"OnDataSaved()\n{\n\t\/\/ TODO: Add your event handler code here\n\t_swdoc.boolFigureChanged = true;\n\n}"},{"name":"OnSaveData","code":"OnSaveData()\n{\n\t\/\/ TODO: Add your event handler code here\n\tif(!app.service.can_update(true))\n\t\treturn false;\n\n\treturn true;\n}"}]}}},"layouts":{"layout":[{"appearance":{"width":"401","height":"153","backgroundColor":"#ffffff","fillColour":"#f2eedd","textColour":"#000000","font":{"@size":"8","#text":"Arial"}},"controls":{"control":[{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"0","caption":"Subscriber","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"30","left":"10","right":"120","bottom":"46"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"sc_subscription.fk_me_display"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"type":"Field"},"appearance":{"index":"1","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"30","left":"130","right":"380","bottom":"48"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"sc_subscription.fk_me_display"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","flags":{"invisible":"false","readOnly":"true","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"true","protected":"false","noMacroExpand":"false","readOnlyInit":"false","autoCompleteField":"false","editUnlimitedText":"false","url":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","borderColor":"#c0c0c0"}}},{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"2","caption":"Subscription Type","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"7","left":"10","right":"120","bottom":"23"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"sc_subscription.type"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"fld_type","type":"Field"},"appearance":{"index":"3","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"7","left":"130","right":"380","bottom":"25"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"sc_subscription.type"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","flags":{"invisible":"false","readOnly":"true","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"true","protected":"false","noMacroExpand":"false","readOnlyInit":"false","autoCompleteField":"false","editUnlimitedText":"false","url":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","borderColor":"#c0c0c0"}}},{"general":{"name":"Label1","type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"4","caption":"Can Subscribe","backgroundColor":"#f2eedd","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"53","left":"35","right":"120","bottom":"69"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"sc_subscription.permis_search"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"Field1","type":"Field"},"appearance":{"index":"5","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"53","left":"130","right":"380","bottom":"71"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"sc_subscription.permis_search"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Pick List (Numeric Mode)","flags":{"invisible":"false","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","comboAutoUpdate":"false","comboNewValues":"false","useDDPickList":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"defaultValue":"1","listItems":"Yes^1|No^0|","image":"#eeeeee","borderColor":"#c0c0c0","disabledBackgroundColor":"#eeeeee"}}},{"general":{"name":"Label2","type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"6","caption":"Can View Prices","backgroundColor":"#f2eedd","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"76","left":"17","right":"120","bottom":"92"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"sc_subscription.permis_price"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"Field2","type":"Field"},"appearance":{"index":"7","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"76","left":"130","right":"380","bottom":"94"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"sc_subscription.permis_price"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Pick List (Numeric Mode)","flags":{"invisible":"false","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","comboAutoUpdate":"false","comboNewValues":"false","useDDPickList":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"defaultValue":"0","listItems":"Yes^1|No^0|","image":"#eeeeee","borderColor":"#c0c0c0","disabledBackgroundColor":"#eeeeee"}}},{"general":{"name":"Label3","type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"8","caption":"Subscription Price","backgroundColor":"#f2eedd","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"99","left":"25","right":"120","bottom":"115"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"sc_subscription.subscription_price"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"Field3","type":"Field"},"appearance":{"index":"9","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"99","left":"130","right":"380","bottom":"117"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"sc_subscription.subscription_price"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","textLineCount":"0","textInputFormat":"Text","properties":{"image":"#eeeeee","borderColor":"#c0c0c0","disabledBackgroundColor":"#eeeeee"}}},{"general":{"name":"Label4","type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"10","caption":"Request Price","backgroundColor":"#f2eedd","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"122","left":"45","right":"120","bottom":"138"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"sc_subscription.request_price"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"Field4","type":"Field"},"appearance":{"index":"11","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"122","left":"130","right":"380","bottom":"140"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"sc_subscription.request_price"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","textLineCount":"0","textInputFormat":"Text","properties":{"image":"#eeeeee","borderColor":"#c0c0c0","disabledBackgroundColor":"#eeeeee"}}}]},"javascript":{"methods":{"method":[{"name":"OnFormLoaded","code":"OnFormLoaded(bDataReloaded)\n{\n\t\/\/ TODO: Add your event handler code here\n\t_swdoc.setup_form_fields();\n\n}"},{"name":"OnTimer","code":"OnTimer(nTimer)\n{\n\t\/\/ TODO: Add your event handler code here\n\tmainform.KillTimer(nTimer);\n\t_swdoc.checkSLAs();\n\n\n}"},{"name":"Field3_OnValueChanged","code":"Field3_OnValueChanged(strValue)\n{\n\t\/\/ TODO: Add your event handler code here\n\n\tif(isNaN(strValue))\n\t{\n\t\tsc_subscription.subscription_price = _swdoc.origValueSub;\n\t}\n\telse\n\t{\n\t\tsc_subscription.subscription_price = format_float_to_decimal_str(strValue);\n\t\t_swdoc.origValueSub = sc_subscription.subscription_price;\n\t}\n\t_swdoc.UpdateFormFromData();\n\t\n}"},{"name":"Field4_OnValueChanged","code":"Field4_OnValueChanged(strValue)\n{\n\t\/\/ TODO: Add your event handler code here\n\n\tif(isNaN(strValue))\n\t{\n\t\tsc_subscription.request_price = _swdoc.origValueReq;\n\t}\n\telse\n\t{\n\t\tsc_subscription.request_price = format_float_to_decimal_str(strValue);\n\t\t_swdoc.origValueReq = sc_subscription.request_price;\n\t}\n\t_swdoc.UpdateFormFromData();\n\n\n}"}]}}},{"appearance":{"width":"360","height":"220","backgroundColor":"#ffffff","fillColour":"#ffffff","textColour":"#000000","font":{"@size":"8","#text":"Arial"}},"javascript":{}}]}}}