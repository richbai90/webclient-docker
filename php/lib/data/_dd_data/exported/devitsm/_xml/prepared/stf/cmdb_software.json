{"espForm":{"configuration":{"settings":{"name":"cmdb_software","title":"Extended Details","description":"Extended Details form for citype_software","options":{"allowResize":"true","showMenubar":"false","showToolbar":"true","showStatusBar":"false"}},"tables":{"table":[{"name":"citype_software","type":"Main Details Table","flags":"0"},{"name":"config_itemi","type":"Extended Details Table","mainDetailsColumn":"pk_ci_id","flags":"0"}]},"javascript":{"methods":{"method":[{"name":"(Globals)","code":"var strChangeBackBinding = \"\";\nvar strChangeBackToValue = \"\";\nvar boolForceDiaryUpdate = false;\nvar strAutoDiaryText = \"\";\nvar boolSilentDiaryUpdate = false;\nvar strSilentDiaryText = \"\";\nfunction MF()\n{\n\treturn _swdoc.mainform;\n}\n\nfunction oCI()\n{\n\treturn _swdoc.config_itemi;\n}\nvar strCurrentSupplier = \"\";"},{"name":"OnFormLoaded","code":"OnFormLoaded(strFormName, strclass)\n{\n\t\/\/ TODO: Add your event handler code here\n\t_swdoc.strCurrentSupplier = _swdoc.oCI().fk_supplier;\n\t\n\tvar boolEnableChangeControl = app.g.check_change_control(_swdoc.oCI().pk_auto_id,_swdoc.oCI().ck_config_type);\n\t\n\tif(boolEnableChangeControl && !app.cmdb.is_specialist())\n\t{\n\t\tfor (var x = 0; x< _swdoc['mainform'].elements.length;x++)\n    \t{\n        \tvar element = _swdoc['mainform'].elements[x];\n        \t_ero(element, true);\n    \t}\n    }\n\t\n}"},{"name":"OnDataSaved","code":"OnDataSaved()\n{\n\tvar funcSilentUpdate = function()\n\t{\n\t\tif(_swdoc.boolSilentDiaryUpdate)\n\t\t{\n\t\t\t\/\/-- add diary entry\n\t\t\tapp.cmdb.insert_diaryentry(_swdoc.oCI().pk_auto_id, \"Manual Update\", \"General Update\", app.session.analystId , app.global.GetCurrentEpocTime(), _swdoc.strSilentDiaryText, 0);\n\t\t}\n\t}\n\t\n\tif(_swdoc.boolForceDiaryUpdate)\n\t{\n\t\t\/\/-- add cmdb log entry by popping up an update form\n\t\tvar strURL = \"config_diary.updatetxt=\" + _swdoc.strAutoDiaryText + \"&config_diary.analystid=\" + app.session.analystId + \"&config_diary.fk_ci_id=\" + _swdoc.oCI().pk_auto_id;\n\t\tapp.cmdb.create_diaryentry(_swdoc.oCI().pk_auto_id, strURL,function()\n\t\t{\n\t\t\tfuncSilentUpdate();\n\t\t});\n\t}\n\telse\n\t{\n\t\tfuncSilentUpdate();\n\t}\n\t\n}"}]}}},"layouts":{"layout":[{"appearance":{"width":"404","height":"150","backgroundColor":"#ffffff","fillColour":"#ffffff","textColour":"#000000","font":{"@size":"8","#text":"Arial"}},"controls":{"control":[{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"0","caption":"Licence Count","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"10","left":"10","right":"120","bottom":"26"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"citype_software.licence_count"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"fld_licencecount","type":"Field"},"appearance":{"index":"1","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"10","left":"130","right":"380","bottom":"28"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"citype_software.licence_count"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","borderColor":"#c0c0c0"}}},{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"2","caption":"Licence Key","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"30","left":"10","right":"120","bottom":"46"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"citype_software.licence_key"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"fld_licencekey","type":"Field"},"appearance":{"index":"3","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"30","left":"130","right":"380","bottom":"48"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"citype_software.licence_key"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","borderColor":"#c0c0c0"}}},{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"4","caption":"Licence Type","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"50","left":"10","right":"120","bottom":"66"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"citype_software.licence_type"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"fld_licencetype","type":"Field"},"appearance":{"index":"5","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"50","left":"130","right":"380","bottom":"68"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"citype_software.licence_type"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","borderColor":"#c0c0c0"}}},{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"6","caption":"Renewal Date","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"70","left":"10","right":"120","bottom":"86"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"citype_software.renewal_datex"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"fld_renewaldate","type":"Field"},"appearance":{"index":"7","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"70","left":"130","right":"380","bottom":"88"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"citype_software.renewal_datex"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Date\/Time Control","textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","borderColor":"#c0c0c0","dateFormatMode":"0"}}},{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"8","caption":"Version","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"90","left":"10","right":"120","bottom":"106"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"citype_software.version"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"fld_version","type":"Field"},"appearance":{"index":"9","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"90","left":"130","right":"380","bottom":"108"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"citype_software.version"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","borderColor":"#c0c0c0"}}},{"general":{"name":"lbl_manufacturer","type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"10","caption":"Manufacturer","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"110","left":"10","right":"120","bottom":"126"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"config_itemi.fk_manufacturer"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"fld_fk_manufacturer","type":"Field"},"appearance":{"index":"11","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"110","left":"130","right":"380","bottom":"128"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"config_itemi.fk_manufacturer"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Distinct Pick List","flags":{"invisible":"false","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","comboAutoUpdate":"false","comboNewValues":"false","pickListOrderDesc":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","borderColor":"#c0c0c0","newRecordForm":"Form.EfManufacturer","storedQuery":"generic.select","sqlSource":"swdata","distinctTable":"manufact","distinctColumn":"comp_name"}}},{"general":{"name":"popup_manufacturer","type":"Image"},"appearance":{"index":"12","caption":"&[app.webroot]\/clisupp\/formimages\/itsm\/form.gif","backgroundColor":"#e7e4dc","foregroundColor":"#000000","font":{"@size":"0"},"alignment":"ExactSize","borderStyle":"None"},"objectPlacement":{"position":{"top":"111","left":"385","right":"401","bottom":"129"},"scaling":{"top":"0","left":"100","right":"100","bottom":"0"}},"controlInfo":{"mouseOverCursor":"Window Default","properties":{"backMode":"1","imageHAlign":"1","imageVAlign":"1"}}}]},"javascript":{"methods":{"method":[{"name":"popup_manufacturer_OnLeftClick","code":"popup_manufacturer_OnLeftClick()\n{\n\tif (_swdoc.oCI().fk_manufacturer != \"\")\t\n\t\tapp.OpenFormForEdit(\"EfManufacturer\", _swdoc.oCI().fk_manufacturer, \"\", true, function(){});\n}"},{"name":"OnFieldValueChanged","code":"OnFieldValueChanged(strName, strValue)\n{\n\tvar oEle = _swdoc.MF().elements[strName];\n\tif((oEle) && (oEle.dataRef!=\"\"))\n\t{\n\t\tvar passbackvalue = app.cmdb.check_ci_element_attribute(oEle,_swdoc,undefined,strValue);\n\t\t\n\t\tif(passbackvalue==\"__notcmdbfield__\") return true;\n\t\tif(passbackvalue!=strValue)\n\t\t{\n\t\t\t_swdoc.strChangeBackBinding = oEle.dataRef;\n\t\t\t_swdoc.strChangeBackToValue = passbackvalue;\n\t\t\t\/\/-- need to reset value back\n\t\t\t_swdoc.MF().SetTimer(1, 10);\n\t\t}\n\t}\n}"},{"name":"OnTimer","code":"OnTimer(nTimer)\n{\n\t_swdoc.MF().KillTimer(nTimer);\n\t\n\t\/\/-- reset field value from onfieldvaluechanged\n\tif(nTimer==1)\n\t{\n\t\tapp.g.set_doc_record_fieldvalue(_swdoc, _swdoc.strChangeBackBinding, _swdoc.strChangeBackToValue);\n\t}\n}"}]}}},{"appearance":{"width":"360","height":"220","backgroundColor":"#ffffff","fillColour":"#ffffff","textColour":"#000000","font":{"@size":"8","#text":"Arial"}},"javascript":{}}]}}}