{"espForm":{"configuration":{"settings":{"name":"cmdb_avail_history","title":"Availability History","options":{"allowResize":"true","showMenubar":"false","showToolbar":"true","showStatusBar":"false"}},"tables":{"table":{"name":"ci_avail_hist","type":"Main Details Table","flags":"0"}},"javascript":{"methods":{"method":[{"name":"(Globals)","code":"var boolSaved = false;\nvar binserting = false;\n\nfunction oHist()\n{\n\treturn _swdoc.ci_avail_hist;\n}\n\nfunction MF()\n{\n\treturn _swdoc.mainform;\n}\n\nfunction calc_downtime()\n{\n\t\/\/-- work out operational down time in hours and mins\n\tvar intMinutes = app.cmdb.get_unavailable_workingtime(_swdoc.oHist().fk_ci_id, _swdoc.MF().tb_startedonx.value, _swdoc.MF().tb_endedonx.value);\n\t\n\t_swdoc.oHist().opminutesdown = intMinutes; \/\/- -for reporting\n\t_swdoc.oHist().opdowntime = app.g.hoursminutes_fromminutes(intMinutes); \/\/-- in hours and mins\n\t\n\tvar intTotalMinutes = app.cmdb.get_unavailable_time(_swdoc.MF().tb_startedonx.value, _swdoc.MF().tb_endedonx.value);\n\t\/\/-- work out total down time in hours and mins\n\/\/\tvar intTotalSeconds = (_swdoc.MF().tb_endedonx.value - _swdoc.MF().tb_startedonx.value);\n\/\/\tvar intTotalMinutes = new String(intTotalSeconds \/ 60).split(\".\")[0];\n\t_swdoc.oHist().minutesdown = intTotalMinutes; \/\/-- for reporting\n\t_swdoc.oHist().downtime = app.g.hoursminutes_fromminutes(intTotalMinutes); \/\/-- in hours and mins\n\t\n\t\/\/-- totoal minutes to resolve\n\t_ete(_swdoc.MF().tb_timetofix, app.g.hoursminutes_fromminutes(_swdoc.oHist().minutesdown));\t\n\t\n\t_swdoc.UpdateFormFromData();\n}\n\nfunction apply_to_opparents()\n{\n\tvar strPIDS = app.cmdb.get_ci_related_cis(ci_avail_hist.fk_ci_id , true,\"\");\n\tif(strPIDS==\"-1\") return;\n\t\n\tvar arrPIDS = strPIDS.split(\",\");\n\tvar arrSwapValues = new Array();\n\n\tarrSwapValues['fk_ci_item'] = mainform.lb_ci.display;\n\tfor(var x=0;x<arrPIDS.length;x++)\n\t{\n\t\tarrSwapValues['fk_ci_id'] = arrPIDS[x];\n\n\t\t\/\/-- work out operational down time in hours and mins\n\t\tvar intMinutes = app.cmdb.get_unavailable_workingtime(arrPIDS[x], _swdoc.MF().tb_startedonx.value, _swdoc.MF().tb_endedonx.value);\n\t\tarrSwapValues['opdowntime'] = app.g.hoursminutes_fromminutes(intMinutes); \/\/-- in hours and mins\t\n\t\tarrSwapValues['opminutesdown'] = intMinutes;\n\t\t\n\t\t\/\/-- work out total down time in hours and mins\n\t\tvar intTotalSeconds = (_swdoc.MF().tb_endedonx.value - _swdoc.MF().tb_startedonx.value);\n\t\tvar intTotalMinutes = new String(intTotalSeconds \/ 60).split(\".\")[0];\n\t\tarrSwapValues['downtime'] = app.g.hoursminutes_fromminutes(intTotalMinutes); \/\/-- in hours and mins\n\t\tarrSwapValues['minutesdown'] = intTotalMinutes;\n\t\t\t\t\n\t\tvar intRecID = app.g.copy_sw_record(\"CI_AVAIL_HIST\",_swdoc.ci_avail_hist, \"\",arrSwapValues);\t\n\t\t\n\t\t\/\/-- update parent total stats\n\t\tapp.cmdb.update_avail_hist_stats(arrPIDS[x]);\n\t}\n\n}"},{"name":"OnDataSaved","code":"OnDataSaved()\n{\n\t_swdoc.boolSaved = true;\n\n\tif(_swdoc.binserting)\n\t{\n\t\t_swdoc.binserting=false;\n\t\t_swdoc.apply_to_opparents();\n\t}\n\t\n}"}]}}},"layouts":{"layout":[{"appearance":{"width":"442","height":"369","backgroundColor":"#f2eedd","fillColour":"#ffffff","textColour":"#000000","font":{"@size":"8","#text":"Arial"}},"controls":{"control":[{"general":{"type":"Field","group":"tabHist:0"},"appearance":{"index":"0","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"151","left":"104","right":"428","bottom":"169"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"ci_avail_hist.probtitle"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","borderColor":"#c0c0c0"}}},{"general":{"name":"lb_probprofile","type":"Field","group":"tabHist:0"},"appearance":{"index":"1","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"173","left":"104","right":"428","bottom":"191"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"ci_avail_hist.probcode"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Distinct Pick List","flags":{"invisible":"false","readOnly":"true","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","comboAutoUpdate":"false","comboNewValues":"true","pickListOrderDesc":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","hintText":"Click here to select a problem profile","sqlSource":"swdata","distinctTable":"pcdesc","distinctColumn":"code","displayColumn":"info","borderColor":"#c0c0c0","dropdownButtonType":"1"}}},{"general":{"type":"Field","group":"tabHist:0"},"appearance":{"index":"2","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"195","left":"104","right":"428","bottom":"350"},"scaling":{"top":"0","left":"0","right":"100","bottom":"100"}},"data":{"binding":"ci_avail_hist.probtext"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","flags":{"invisible":"false","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","autoCompleteField":"false","editUnlimitedText":"true","url":"false"},"textLineCount":"2","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","borderColor":"#c0c0c0"}}},{"general":{"name":"lb_ci","type":"Field"},"appearance":{"index":"3","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"12","left":"104","right":"428","bottom":"30"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"ci_avail_hist.fk_ci_id"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Distinct Pick List","flags":{"invisible":"false","readOnly":"false","mandatory":"true","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"true","protected":"false","noMacroExpand":"false","readOnlyInit":"false","comboAutoUpdate":"false","comboNewValues":"false","pickListOrderDesc":"false"},"textLineCount":"0","textInputFormat":"Text","displayColumnValue":"hsluksw1","properties":{"disabledBackgroundColor":"#eeeeee","sqlSource":"swdata","distinctTable":"config_itemi","distinctColumn":"pk_auto_id","displayColumn":"ck_config_item","borderColor":"#c0c0c0","storedQuery":"generic.select"}}},{"general":{"name":"tb_startedonx","type":"Field"},"appearance":{"index":"4","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"34","left":"104","right":"227","bottom":"52"},"scaling":{"top":"0","left":"0","right":"50","bottom":"0"}},"data":{"binding":"ci_avail_hist.startedonx"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Date\/Time Control","flags":{"invisible":"false","readOnly":"false","mandatory":"true","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"true","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","colorDateIndicator":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","dateFormatMode":"3","dateFormat":"yyyy\/MM\/dd HH:mm","borderColor":"#c0c0c0"}}},{"general":{"name":"tb_endedonx","type":"Field"},"appearance":{"index":"5","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"34","left":"305","right":"428","bottom":"52"},"scaling":{"top":"0","left":"50","right":"100","bottom":"0"}},"data":{"binding":"ci_avail_hist.endedonx"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Date\/Time Control","flags":{"invisible":"false","readOnly":"false","mandatory":"true","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","colorDateIndicator":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","dateFormatMode":"3","dateFormat":"yyyy\/MM\/dd HH:mm","borderColor":"#c0c0c0"}}},{"general":{"name":"tb_callref","type":"Field"},"appearance":{"index":"6","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"100","left":"305","right":"428","bottom":"118"},"scaling":{"top":"0","left":"50","right":"100","bottom":"0"}},"data":{"binding":"ci_avail_hist.fk_callref"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","hintText":"<enter reference>","borderColor":"#c0c0c0"}}},{"general":{"name":"tabHist","type":"TabControl","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"7","caption":"Tab1","backgroundColor":"#ded7ce","foregroundColor":"#ffffff","font":{"@size":"8","#text":"Arial"},"borderStyle":"None"},"objectPlacement":{"position":{"top":"116","left":"10","right":"437","bottom":"362"},"scaling":{"top":"0","left":"0","right":"100","bottom":"100"}},"tabStyle":"Top","tabSize":"19","items":{"item":[{"name":"Problem Detail","properties":"56=#eaeaea|59=#5f5f5f|_flags=0","textBorder":"None","textBackgroundColor":"#ffffff","controlInfo":{"mouseOverCursor":"Window Default","properties":{"tabColor":"#eaeaea","inactiveTextColor":"#5f5f5f"}}},{"name":"Resolution Detail","properties":"56=#eaeaea|59=#5f5f5f|_flags=0","textBorder":"None","textBackgroundColor":"#ffffff","controlInfo":{"mouseOverCursor":"Window Default","properties":{"tabColor":"#eaeaea","inactiveTextColor":"#5f5f5f"}}}]},"selectedTextFont":{"@size":"8","#text":"Arial"},"selectedTextColor":"#000000","deselectedTextColor":"#000000","tabSlopeLeft":"2","tabSlopeRight":"2","deselectedTabHeightOffset":"1","tabSpacing":"0","controlInfo":{"mouseOverCursor":"Window Default","properties":{"tabStyle":"0"}}},{"general":{"type":"Field","group":"tabHist:1"},"appearance":{"index":"8","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"151","left":"104","right":"428","bottom":"169"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"ci_avail_hist.fixtitle"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","borderColor":"#c0c0c0"}}},{"general":{"name":"lb_fixcode","type":"Field","group":"tabHist:1"},"appearance":{"index":"9","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"173","left":"104","right":"428","bottom":"191"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"ci_avail_hist.fixcode"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Distinct Pick List","flags":{"invisible":"false","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","comboAutoUpdate":"false","comboNewValues":"true","pickListOrderDesc":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","hintText":"Click here to select a resoution profile","sqlSource":"swdata","distinctTable":"rcdesc","distinctColumn":"code","displayColumn":"info","borderColor":"#c0c0c0"}}},{"general":{"type":"Field","group":"tabHist:1"},"appearance":{"index":"10","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"195","left":"104","right":"428","bottom":"321"},"scaling":{"top":"0","left":"0","right":"100","bottom":"100"}},"data":{"binding":"ci_avail_hist.fixtext"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","flags":{"invisible":"false","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","autoCompleteField":"false","editUnlimitedText":"true","url":"false"},"textLineCount":"2","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","borderColor":"#c0c0c0"}}},{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"11","caption":"Total Down Time (Hrs)","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"58","left":"191","right":"301","bottom":"74"},"scaling":{"top":"0","left":"50","right":"50","bottom":"0"}},"data":{"binding":"ci_avail_hist.downtime"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"type":"Field"},"appearance":{"index":"12","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"56","left":"305","right":"428","bottom":"74"},"scaling":{"top":"0","left":"50","right":"100","bottom":"0"}},"data":{"binding":"ci_avail_hist.downtime"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","flags":{"invisible":"false","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"true","protected":"false","noMacroExpand":"false","readOnlyInit":"false","autoCompleteField":"false","editUnlimitedText":"false","url":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","borderColor":"#c0c0c0"}}},{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"13","caption":"Ended On","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"34","left":"234","right":"301","bottom":"52"},"scaling":{"top":"0","left":"50","right":"50","bottom":"0"}},"data":{"binding":"ci_avail_hist.endedonx"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"},"group":"tabHist:1"},"appearance":{"index":"14","caption":"Resolution Profile","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"173","left":"-10","right":"100","bottom":"191"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"ci_avail_hist.fixcode"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"},"group":"tabHist:1"},"appearance":{"index":"15","caption":"Resolution Text","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"195","left":"-10","right":"100","bottom":"211"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"ci_avail_hist.fixtext"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"},"group":"tabHist:1"},"appearance":{"index":"16","caption":"Resolution Title","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"151","left":"-10","right":"100","bottom":"169"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"ci_avail_hist.fixtitle"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"17","caption":"Configuration ID","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"12","left":"-10","right":"100","bottom":"30"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"ci_avail_hist.fk_ci_id"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"},"group":"tabHist:0"},"appearance":{"index":"18","caption":"Problem Profile","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"173","left":"-10","right":"100","bottom":"191"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"ci_avail_hist.probcode"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"},"group":"tabHist:0"},"appearance":{"index":"19","caption":"Problem Text","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"195","left":"-10","right":"100","bottom":"213"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"ci_avail_hist.probtext"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"},"group":"tabHist:0"},"appearance":{"index":"20","caption":"Problem Title","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"151","left":"-10","right":"100","bottom":"169"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"ci_avail_hist.probtitle"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"21","caption":"Started On","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"34","left":"-10","right":"100","bottom":"52"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"ci_avail_hist.startedonx"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"22","caption":"Op. Down Time (hrs)","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"80","left":"180","right":"301","bottom":"96"},"scaling":{"top":"0","left":"50","right":"50","bottom":"0"}},"data":{"binding":"ci_avail_hist.opdowntime"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"type":"Field"},"appearance":{"index":"23","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"78","left":"305","right":"428","bottom":"96"},"scaling":{"top":"0","left":"50","right":"100","bottom":"0"}},"data":{"binding":"ci_avail_hist.opdowntime"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","flags":{"invisible":"false","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"true","protected":"false","noMacroExpand":"false","readOnlyInit":"false","autoCompleteField":"false","editUnlimitedText":"false","url":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","borderColor":"#c0c0c0"}}},{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"24","caption":"Request","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"100","left":"191","right":"301","bottom":"118"},"scaling":{"top":"0","left":"50","right":"50","bottom":"0"}},"data":{"binding":"ci_avail_hist.fk_callref"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"btn_resprofile","type":"EventButton","flags":{"transparent":"false","xpStyle":"true","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"},"group":"tabHist:1"},"appearance":{"index":"25","caption":"...","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"}},"objectPlacement":{"position":{"top":"171","left":"410","right":"428","bottom":"192"},"scaling":{"top":"0","left":"100","right":"100","bottom":"0"}},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"tb_timetofix","type":"Field","group":"tabHist:1"},"appearance":{"index":"26","backgroundColor":"#eeeeee","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"330","left":"349","right":"428","bottom":"348"},"scaling":{"top":"100","left":"100","right":"100","bottom":"100"}},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","flags":{"invisible":"false","readOnly":"true","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","autoCompleteField":"false","editUnlimitedText":"false","url":"false"},"textLineCount":"0","textInputFormat":"Numeric","properties":{"disabledBackgroundColor":"#eeeeee","defaultValue":"0:00","borderColor":"#c0c0c0","precision":"15","scale":"10"}}},{"general":{"name":"Text1","type":"Text","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"},"group":"tabHist:1"},"appearance":{"index":"27","caption":"Time (hh:mm) taken to resolve availability outage","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"330","left":"103","right":"344","bottom":"348"},"scaling":{"top":"100","left":"100","right":"100","bottom":"100"}},"controlInfo":{"mouseOverCursor":"Window Default"}}]},"javascript":{"methods":{"method":[{"name":"OnFormLoaded","code":"OnFormLoaded()\n{\n\t\/\/-- load any fields as passed in from the calling function\n\tif(_swdoc.oHist().pk_auto_id==0)\n\t{\n\t\t_swdoc.binserting =true;\n\t\tapp.g.popuplate_form_fromargs(\"ci_avail_hist\", _swdoc, true,true);\n\t\n\t\t_swdoc.oHist().timetoresolve = \"0\";\n\t\t\/\/ci_avail_hist.endedonx = app.global.GetCurrentEpocTime();\n\t\t_swdoc.UpdateFormFromData();\n\t\t_swdoc.calc_downtime();\n\t\t\/\/intTotalMinutes = app.cmdb.get_unavailable_workingtime(_swdoc.oHist().fk_ci_id, tb_startedonx.value, tb_endedonx.value);\n\t}\n\telse\n\t{\n\t\t\n\t\t_ete(tb_timetofix, app.g.hoursminutes_fromminutes(_swdoc.oHist().minutesdown));\t\t\n\t}\n\t\n\t\/\/MessageBox(ci_avail_hist.startedonx)\n}"},{"name":"lb_fixcode_OnLeftClick","code":"lb_fixcode_OnLeftClick()\n{\n\tapp.g.pick_resolutionprofile(\"\",\"\", function(strCode){\n\t\tif(strCode){\n\t\t\t_swdoc.oHist().fixcode = strCode;\n\t\t\t_swdoc.UpdateFormFromData();\n\t\t}\t\n\t});\n\treturn false;\n}"},{"name":"lb_fixcode_OnRightClick","code":"lb_fixcode_OnRightClick()\n{\n\t_swdoc.oHist().fixcode = \"\";\n\t_ete(lb_fixcode, \"\");\n\t_swdoc.UpdateFormFromData();\n\treturn false;\n}"},{"name":"lb_probprofile_OnRightClick","code":"lb_probprofile_OnRightClick()\n{\n\n\t_swdoc.oHist().probcode = \"\";\n\t_ete(lb_probprofile, \"\");\n\t_swdoc.UpdateFormFromData();\n\treturn false;\n\t\n}"},{"name":"lb_probprofile_OnLeftClick","code":"lb_probprofile_OnLeftClick()\n{\n\t\/\/--\n\tapp.g.pick_problemprofile(\"\", \"\", false, function(strCode){\n\t\tif(strCode){\n\t\t\t_swdoc.oHist().probcode = strCode;\n\t\t\t_swdoc.UpdateFormFromData();\n\t\t}\t\n\t});\n\n\treturn false;\n\t\n}"},{"name":"btn_resprofile_OnPressed","code":"btn_resprofile_OnPressed()\n{\n\tlb_fixcode_OnLeftClick();\n}"},{"name":"tb_callref_OnValueChanged","code":"tb_callref_OnValueChanged(strValue)\n{\n\tif(strValue.length)\n\t{\n\t\tvar strCallRef = strValue;\n\t\tvar strLeadChar = strValue[0];\n\t\tif(strLeadChar.toUpperCase() == \"F\")\n\t\t{\n\t\t\tstrCallRef = strCallRef.substr(1, strCallRef.length);\n\t\t}\n\n\t\t\/\/-- Check that the numeric part of the callref is within the range 1-999999999,\n\t\t\/\/-- if it is out of range then inform the analyst and clear the field\n\t\tif(strCallRef < 1 || strCallRef > 999999999 || isNaN(strCallRef))  \n\t\t{\n\t\t\tMessageBox(\"Invalid Call Reference\", MB_OK | MB_ICONINFORMATION);\n\t\t\t_swdoc.oHist().fk_callref = \"\";\n\t\t\t_swdoc.UpdateFormFromData();\n\t\t\treturn false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t_swdoc.oHist().fk_callref = dd.tables.opencall.columns.callref.FormatValue(strCallRef);\n\t\t}\n\t\t\n\t\t\n\t\t\/\/-- get profile code and desc for this call\n\t\tif(confirm(\"Would you like to retrieve the problem and resolution profile codes and descriptions for the entered request?\"))\n\t\t{\n\t\t\tvar oRec = app.g.get_record(\"OPENCALL\", strCallRef);\n\t\t\tif(oRec)\n\t\t\t{\n\t\t\t\tstrProbCode = oRec.probcode;\n\t\t\t\tstrFixCode = oRec.fixcode;\n\t\t\t\tstrProbDesc = oRec.prob_text;\n\t\t\t\tstrFixDesc = oRec.resolve_text;\n\t\t\t\tstrCloseDesc = oRec.close_text;\t\t\t\t\n\t\t\t\tintFixTime = oRec.fix_time;\t\t\t\t\n\t\t\t\tstrResText = (strFixDesc!=\"\")?strFixDesc:strCloseDesc;\n\t\t\t\t\n\t\t\t\t_swdoc.oHist().probcode = strProbCode;\n\t\t\t\t_swdoc.oHist().fixcode = strFixCode;\t\t\t\t\n\t\t\t\t_swdoc.oHist().probtext = strProbDesc;\n\t\t\t\t_swdoc.oHist().fixtext = strResText;\t\t\t\t\t\n\t\t\t\t\n\t\t\t\t\/\/--\n\t\t\t\t_ete(lb_probprofile, _swdoc.oHist().probcode);\n\t\t\t\t_ete(lb_fixcode, _swdoc.oHist().fixcode);\n\t\t\t\t\n\t\t\t\tvar intFixMinutes = Math.round(intFixTime\/60);\n\t\t\t\t_swdoc.oHist().timetoresolve = intFixMinutes+\"\";\n\t\t\t\t_ete(tb_timetofix, app.g.hoursminutes_fromminutes(intFixMinutes));\t\t\n\t\t\t}\n\t\t}\n\n\t\t_swdoc.UpdateFormFromData();\t\t\n\t}\n\t\n}"},{"name":"tb_endedonx_OnValueChanged","code":"tb_endedonx_OnValueChanged(strValue)\n{\n\t_swdoc.calc_downtime();\n\t\n}"},{"name":"tb_startedonx_OnValueChanged","code":"tb_startedonx_OnValueChanged(strValue)\n{\n\t_swdoc.calc_downtime();\n\n}"}]}}},{"appearance":{"width":"360","height":"220","backgroundColor":"#ffffff","fillColour":"#ffffff","textColour":"#000000","font":{"@size":"8","#text":"Arial"}},"javascript":{}}]}}}