{"espForm":{"configuration":{"settings":{"name":"service_costs","title":"Additional Cost","options":{"allowResize":"true","showMenubar":"false","showToolbar":"true","showStatusBar":"false"}},"tables":{"table":{"name":"sc_rels","type":"Main Details Table","flags":"0"}},"javascript":{"methods":{"method":[{"name":"OnSaveData","code":"OnSaveData()\n{\n\t\/\/ TODO: Add your event handler code here\n\tif(!app.service.can_update(true))\n\t\treturn false;\n\tsc_rels.total_cost_for_item = format_float_to_decimal_str(Number(sc_rels.total_unit_cost)*Number(sc_rels.units));\n\n\tif(sc_rels.flg_isoptional==\"1\" && sc_rels.apply_type!='Maintenance' && sc_rels.flg_include==\"1\")\n\t{\n\t\tvar strNewCost = app.service.get_service_costing(sc_rels.fk_service,sc_rels.pk_auto_id,sc_rels.total_cost_for_item,sc_rels.apply_type);\n\n\t\tvar strField = \"request_price\";\n\t\tvar strConfirmText = 'This will make the request cost greater than request price for 1 or more entities. Do you wish to continue?';\n\t\tvar strParams = \"sid=\"+sc_rels.fk_service+ \"&type=SUB\";\n\n\t\tif(sc_rels.apply_type=='Per Subscription')\n\t\t{\n\t\t\tstrField = \"subscription_price\";\n\t\t\tstrParams = \"sid=\"+sc_rels.fk_service+ \"&type=VIEW\";\n\t\t\tstrConfirmText = 'This will make the subscription cost greater than subscription price for 1 or more entities. Do you wish to continue?';\n\t\t}\n\n\t\tvar oRS  = app.g.get_sqrecordset(\"service\/get_service_subscriptions.select\",strParams);\n\t\twhile (oRS.Fetch())\n\t\t{ \n\t\t\t var strSubPrice = app.g.get_field(oRS,strField);\n\t\t\t if(parseFloat(strSubPrice)<parseFloat(strNewCost) && parseFloat(strSubPrice)>0)\n\t\t\t {\n\t\t\t \tvar boolConfirm = confirm(strConfirmText);\n\t\t\t\treturn boolConfirm;\n\t\t\t }\n\t\t}\n\t}\n\treturn true;\n}"},{"name":"(Globals)","code":"var boolFigureChanged = false;\nvar origValue = \"\";\nfunction MF()\n{\n\treturn mainform;\n}\n\nfunction setup_form_fields()\n{\n\tif(sc_rels.pk_auto_id<1)\n\t{\n\t\tvar strService = _swdoc.GetArg(\"fk_service\");\n\t\tsc_rels.fk_service = strService;\n\t\tsc_rels.flg_isoptional = 1;\n\t}else\n\t{\n\t\tif(sc_rels.cost_type=='Underpinning Service' || sc_rels.cost_type=='Component')\n\t\t{\n\t\t\t_evi(_swdoc.MF().fld_cost_type,false);\n\t\t\t_evi(_swdoc.MF().fld_cost_weighting,true);\n\t\t\t_evi(_swdoc.MF().lbl_cost_type,false);\n\t\t\t_evi(_swdoc.MF().lbl_cost_weighting,true);\n\t\t}\n\t\t\n\t\tif (sc_rels.cost_type=='Component')\n\t\t{\n\t\t\t_swdoc.SetTitle('Component Details');\n\t\t}\n\t}\n\t_swdoc.origValue = sc_rels.total_unit_cost;\n}"},{"name":"OnDataSaved","code":"OnDataSaved()\n{\n\t\/\/ TODO: Add your event handler code here\n\n\t_swdoc.boolFigureChanged = true;\n\t_swdoc.CloseForm();\n\t\n}"}]}}},"layouts":{"layout":[{"appearance":{"width":"476","height":"178","backgroundColor":"#ffffff","fillColour":"#ffffff","textColour":"#000000","font":{"@size":"8","#text":"Arial"}},"controls":{"control":[{"general":{"name":"lbl_cost_type","type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"},"group":"Tab1:0"},"appearance":{"index":"0","caption":"Cost Type","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"42","left":"40","right":"150","bottom":"58"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"sc_rels.cost_type"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"fld_cost_type","type":"Field","group":"Tab1:0"},"appearance":{"index":"1","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"42","left":"160","right":"410","bottom":"60"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"sc_rels.cost_type"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Pick List","flags":{"invisible":"false","readOnly":"false","mandatory":"true","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","comboAutoUpdate":"false","comboNewValues":"true","useDDPickList":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","listItems":"Hardware|Software|Personnel|Administration|Other|","borderColor":"#c0c0c0"}}},{"general":{"name":"fld_description","type":"Field","group":"Tab1:0"},"appearance":{"index":"2","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"65","left":"160","right":"410","bottom":"83"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"sc_rels.description"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","flags":{"invisible":"false","readOnly":"false","mandatory":"true","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","autoCompleteField":"false","editUnlimitedText":"false","url":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","borderColor":"#c0c0c0"}}},{"general":{"type":"Field","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"},"group":"Tab1:0"},"appearance":{"index":"3","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"None"},"objectPlacement":{"position":{"top":"130","left":"160","right":"410","bottom":"146"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"sc_rels.flg_include"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Form Flags","textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","flagItems":"Include in basic cost calculation^1|"}}},{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"},"group":"Tab1:0"},"appearance":{"index":"4","caption":"Unit Cost","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"109","left":"40","right":"150","bottom":"125"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"sc_rels.total_unit_cost"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"fld_total_unit_costs","type":"Field","group":"Tab1:0"},"appearance":{"index":"5","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"109","left":"159","right":"409","bottom":"127"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"sc_rels.total_unit_cost"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","borderColor":"#c0c0c0"}}},{"general":{"name":"Label1","type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"},"group":"Tab1:0"},"appearance":{"index":"6","caption":"Apply Type","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"87","left":"87","right":"150","bottom":"103"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"sc_rels.apply_type"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"Field1","type":"Field","group":"Tab1:0"},"appearance":{"index":"7","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"87","left":"160","right":"410","bottom":"105"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"sc_rels.apply_type"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Pick List","flags":{"invisible":"false","readOnly":"false","mandatory":"true","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","comboAutoUpdate":"false","comboNewValues":"true","useDDPickList":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"image":"#eeeeee","listItems":"Per Request|Maintenance|Per Subscription|","disabledBackgroundColor":"#eeeeee","borderColor":"#c0c0c0"}}},{"general":{"name":"Tab1","type":"TabControl","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"8","caption":"Tab1","backgroundColor":"#ded7ce","foregroundColor":"#f7f3ef","font":{"@size":"8","#text":"Arial"},"borderStyle":"None"},"objectPlacement":{"position":{"top":"6","left":"13","right":"461","bottom":"160"},"scaling":{"top":"0","left":"0","right":"100","bottom":"100"}},"tabStyle":"Top","tabSize":"19","items":{"item":[{"name":"Cost","properties":"56=#8aa8e4|_flags=0","textBorder":"None","textBackgroundColor":"#ffffff","controlInfo":{"mouseOverCursor":"Window Default","properties":{"tabColor":"#8aa8e4"}}},{"name":"Customisable","properties":"56=#ffdb75|_flags=1","textBorder":"None","textBackgroundColor":"#ffffff","controlInfo":{"mouseOverCursor":"Window Default","flags":{"invisible":"true","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","multiLine":"false"},"properties":{"tabColor":"#ffdb75"}}}]},"selectedTextFont":{"@size":"8","#text":"Arial"},"selectedTextColor":"#000000","deselectedTextColor":"#000000","tabSlopeLeft":"2","tabSlopeRight":"2","deselectedTabHeightOffset":"1","tabSpacing":"0","controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"sl_custom","type":"SqlTable","flags":{"transparent":"false","xpStyle":"true","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false","showHeader":"true","verticalGridLines":"true","horizontalGridLines":"true","autoLoad":"true","allowMultiSelect":"false"},"group":"Tab1:1"},"appearance":{"index":"9","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"64","left":"22","right":"449","bottom":"252"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"columns":{"controlInfo":[{"mouseOverCursor":"Window Default","type":"Text Edit","flags":{"invisible":"false","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","autoCompleteField":"false","editUnlimitedText":"false","url":"false","hidden":"false","allowResize":"true","allowSort":"true"},"textLineCount":"0","textInputFormat":"Text","properties":{"column":"description"},"name":"Title","width":"120","image":"-1","dataColumn":"0"},{"mouseOverCursor":"Window Default","type":"Text Edit","flags":{"invisible":"false","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","autoCompleteField":"false","editUnlimitedText":"false","url":"false","hidden":"false","allowResize":"true","allowSort":"true"},"textLineCount":"0","textInputFormat":"Text","properties":{"column":"total_unit_cost"},"name":"Unit Cost","width":"120","image":"-1","dataColumn":"1"},{"mouseOverCursor":"Window Default","type":"Text Edit","flags":{"invisible":"false","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","autoCompleteField":"false","editUnlimitedText":"false","url":"false","hidden":"true","allowResize":"true","allowSort":"true"},"textLineCount":"0","textInputFormat":"Text","properties":{"column":"fk_key"},"name":"key","width":"120","image":"-1","dataColumn":"2"},{"mouseOverCursor":"Window Default","type":"Text Edit","flags":{"invisible":"false","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","autoCompleteField":"false","editUnlimitedText":"false","url":"false","hidden":"true","allowResize":"true","allowSort":"true"},"textLineCount":"0","textInputFormat":"Text","properties":{"column":"pk_auto_id"},"name":"pk_auto_id","width":"120","image":"-1","dataColumn":"3"},{"mouseOverCursor":"Window Default","type":"Text Edit","flags":{"invisible":"false","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","autoCompleteField":"false","editUnlimitedText":"false","url":"false","hidden":"false","allowResize":"true","allowSort":"true"},"textLineCount":"0","textInputFormat":"Text","properties":{"column":"units"},"name":"Units","width":"120","image":"-1","dataColumn":"4"},{"mouseOverCursor":"Window Default","type":"Text Edit","flags":{"invisible":"false","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","autoCompleteField":"false","editUnlimitedText":"false","url":"false","hidden":"false","allowResize":"true","allowSort":"true"},"textLineCount":"0","textInputFormat":"Text","properties":{"column":"total_cost_for_item"},"name":"Total Cost For Item","width":"120","image":"-1","dataColumn":"5"}]},"sortColumn":"-1","sortDescending":"false","headerHeight":"18","rowHeight":"16","selectedColor":"#00008b","selectedTextColor":"#ffffff","controlInfo":{"mouseOverCursor":"Window Default","properties":{"highlightStyle":"0","borderColor":"#d3c9b6","sqlSource":"swdata","table":"sc_rels","listFilter":"swc=fk_service_costs&kvs=&[service_costs.pk_auto_id]","storedQuery":"common.load_by_colname"}}},{"general":{"name":"btn_add_customisable","type":"EventButton","group":"Tab1:1"},"appearance":{"index":"10","caption":"Add","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"}},"objectPlacement":{"position":{"top":"37","left":"385","right":"448","bottom":"59"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"controlInfo":{"mouseOverCursor":"Window Default","properties":{"backgroundColor":"#ff9900"}}},{"general":{"name":"btn_remove_customisable","type":"EventButton","group":"Tab1:1"},"appearance":{"index":"11","caption":"Remove","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"}},"objectPlacement":{"position":{"top":"37","left":"318","right":"381","bottom":"59"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"controlInfo":{"mouseOverCursor":"Window Default","properties":{"backgroundColor":"#ff9900"}}},{"general":{"name":"btn_view_customisable","type":"EventButton","group":"Tab1:1"},"appearance":{"index":"12","caption":"View","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"}},"objectPlacement":{"position":{"top":"37","left":"251","right":"314","bottom":"59"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"controlInfo":{"mouseOverCursor":"Window Default","properties":{"backgroundColor":"#ff9900"}}},{"general":{"name":"txt_label","type":"Text","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"},"group":"Tab1:0"},"appearance":{"index":"13","caption":"Description","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"62","left":"55","right":"150","bottom":"87"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"Label2","type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"14","caption":"Units","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Left","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"280","left":"420","right":"452","bottom":"296"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"sc_rels.units"},"controlInfo":{"mouseOverCursor":"Window Default","flags":{"invisible":"true","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","multiLine":"false"}}},{"general":{"name":"Field2","type":"Field"},"appearance":{"index":"15","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"3-D Sunken"},"objectPlacement":{"position":{"top":"280","left":"452","right":"876","bottom":"296"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"sc_rels.units"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","flags":{"invisible":"true","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","autoCompleteField":"false","editUnlimitedText":"false","url":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"defaultValue":"1","image":"#eeeeee","disabledBackgroundColor":"#eeeeee"}}}]},"javascript":{"methods":{"method":[{"name":"OnFormLoaded","code":"OnFormLoaded(bDataReloaded)\n{\n\t\/\/ TODO: Add your event handler code here\n\t_swdoc.setup_form_fields();\n\t\n\t_swdoc.ResetModiedFlag(\"sc_rels\");\n\n}"},{"name":"fld_total_unit_costs_OnValueChanged","code":"fld_total_unit_costs_OnValueChanged(strValue)\n{\n\t\/\/ TODO: Add your event handler code here\n\tif(isNaN(strValue))\n\t{\n\t\tsc_rels.total_unit_cost = _swdoc.origValue;\n\t}\n\telse\n\t{\n\t\tsc_rels.total_unit_cost = format_float_to_decimal_str(strValue);\n\t\tsc_rels.total_cost_for_item = format_float_to_decimal_str(strValue);\n\t\t_swdoc.origValue = sc_rels.total_unit_cost;\n\t}\n\t_swdoc.UpdateFormFromData();\n}"},{"name":"btn_add_customisable_OnPressed","code":"btn_add_customisable_OnPressed()\n{\n\t\/\/ TODO: Add your event handler code here\n\tapp.cmdb.search_service(true,\"\",function(oRes)\n\t{\n\t\tif(oRes.selectedkeys==\"\")return;\n\n\t\t\/\/-- remove duplicates\n\t\tvar strKeys = \"\";\n\t\tvar arrKeys = oRes.selectedkeys.split(\",\");\n\t\tfor(var x=0;x<arrKeys.length;x++)\n\t\t{\n\t\t\t\/\/-- not in list and not the item we actually have loaded  ok to add\n\t\t\tvar foundRowNum = app.g.sqllist_findrow_byvalue(sl_custom,arrKeys[x],'fk_key')\n\t\t\tif((foundRowNum==-1)&&(arrKeys[x] != service_costs.pk_auto_id))\n\t\t\t{\n\t\t\t\n\t\t\t\tif(strKeys!=\"\")strKeys +=\",\";\n\t\t\t\tstrKeys += arrKeys[x];\n\t\t\t}\n\t\t}\n\t\tif(strKeys==\"\")return ;\n\t\t\n\t\tapp.service.add_component_custom(service_costs.pk_auto_id,strKeys);\n\t\t\/\/app.cmdb.add_bundle_item(oItem().fk_ccat_id,strKeys,'REPLACE',oItem().pk_auto_id);\n\t\t\/\/sl_req1.Refresh();\n\t\t\/\/sl_req1.SetRowSelected(0);\n\t\t\/\/sl_req1_OnItemSelected(0);\n\t\tsl_custom.Refresh();\n\t\t\n\t\tif(sl_custom.rowCount()>0)\n\t\t{\n\t\t\tif(service_costs.flg_cancustomise!=\"1\") \n\t\t\t{\n\t\t\t\tservice_costs.flg_cancustomise=\"1\";\n\t\t\t\t_swdoc.Save(0);\n\t\t\t}\n\t\t}\n\t});\n}"},{"name":"btn_remove_customisable_OnPressed","code":"btn_remove_customisable_OnPressed()\n{\n\t\/\/ TODO: Add your event handler code here\n\tvar strSelKeys = app.g.sl_getselected_valuesdel(sl_custom,'pk_auto_id',\",\",\"\");\n\tapp.service.remove_component_custom(strSelKeys);\n\t\n\tsl_custom.Refresh();\n\tif(sl_custom.rowCount()<1)\n\t{\n\t\tif(service_costs.flg_cancustomise!=\"0\") \n\t\t{\n\t\t\tservice_costs.flg_cancustomise=\"0\";\n\t\t\t_swdoc.Save(0);\n\t\t}\n\t}\n\t\n\n}"},{"name":"btn_view_customisable_OnPressed","code":"btn_view_customisable_OnPressed()\n{\n\t\/\/ TODO: Add your event handler code here\n\tvar varKey = sl_custom.GetItemTextRaw(sl_custom.curSel,'pk_auto_id');\n\tvar varType = sl_custom.GetItemTextRaw(sl_custom.curSel,'cost_type');\n\n\tapp.OpenFormForEdit('service_costs',varKey,\"\",true, function(x){\n\t\tif (x.boolFigureChanged){\n\t\t   _swdoc.MF().sl_custom.Refresh();\n\t\t}\n\t});\n}"}]}}},{"appearance":{"width":"360","height":"220","backgroundColor":"#ffffff","fillColour":"#ffffff","textColour":"#000000","font":{"@size":"8","#text":"Arial"}},"javascript":{}}]}}}