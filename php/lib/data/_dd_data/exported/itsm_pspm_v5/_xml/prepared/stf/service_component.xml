<?xml version="1.0" encoding="utf-8" ?>
<espForm>
	<configuration>
		<settings>
			<name>service_component</name>
			<title>Component Details</title>
			<printTemplates>
			</printTemplates>
			<options>
				<allowResize>true</allowResize>
				<showMenubar>false</showMenubar>
				<showToolbar>true</showToolbar>
				<showStatusBar>false</showStatusBar>
			</options>
		</settings>
		<tables>
			<table>
				<name>sc_rels</name>
				<type>Main Details Table</type>
				<flags>0</flags>
				<assignments>
				</assignments>
			</table>
		</tables>
		<showMeItems>
		</showMeItems>
		<javascript>
			<methods>
				<method>
					<name>OnSaveData</name>
					<code>
						<![CDATA[OnSaveData()
{
	// TODO: Add your event handler code here
	if(!app.service.can_update(true))
		return false;
	_swdoc.calc_cost();

	if(sc_rels.flg_isoptional=="1" && sc_rels.flg_include=="1")
	{
		var strNewCost = app.service.get_service_costing(sc_rels.fk_service,sc_rels.pk_auto_id,sc_rels.total_cost_for_item,sc_rels.apply_type);

		var strField = "request_price";
		var strConfirmText = 'This will make the request cost greater than request price for 1 or more entities. Do you wish to continue?';
		var strParams = "sid="+sc_rels.fk_service+ "&type=SUB";

		if(sc_rels.apply_type=='Per Subscription')
		{
			strField = "subscription_price";
			strParams = "sid="+sc_rels.fk_service+ "&type=VIEW";//" and rel_type='VIEW'";
			strConfirmText = 'This will make the subscription cost greater than subscription price for 1 or more entities. Do you wish to continue?';
		}

		var oRS  = app.g.get_sqrecordset("service/get_service_subscriptions.select",strParams);
		while (oRS.Fetch())
		{ 
			 var strSubPrice = app.g.get_field(oRS,strField);
			 if(parseFloat(strSubPrice)<parseFloat(strNewCost) && parseFloat(strSubPrice)>0)
			 {
			 	var boolConfirm = confirm(strConfirmText);
				return boolConfirm;
			 }
		}
	}
	
	return true;
}]]>
					</code>
				</method>
				<method>
					<name>(Globals)</name>
					<code>
						<![CDATA[var boolFigureChanged = false;
var strOrigValueCost = "";
var strOrigValuePrice = "";
var origCost = "";
var origPrice = "";

function oRel()
{
	return _swdoc.sc_rels;
}

function MF()
{
	return mainform;
}

function calc_cost()
{
	var strOrigCost = _swdoc.oRel().total_cost_for_item; 
	var strWeight = "";
	if(_swdoc.oRel().cost_weighting=="")
	{
		strWeight = "0";
	}else
		strWeight = _swdoc.oRel().cost_weighting;
	
	_swdoc.oRel().total_cost_for_item = format_float_to_decimal_str(Number(_swdoc.oRel().total_unit_cost)*Number(_swdoc.oRel().units)*( (Number(strWeight)+100)/100));

	_swdoc.oRel().customise_diff = format_float_to_decimal_str(Number(_swdoc.oRel().customise_diff)+Number(_swdoc.oRel().total_cost_for_item)- Number(strOrigCost));

	_swdoc.UpdateFormFromData();	
}

function calc_price()
{
	var strOrigPrice = _swdoc.oRel().price; 

	_swdoc.oRel().price_diff = format_float_to_decimal_str(Number(_swdoc.oRel().price_diff)+Number(_swdoc.oRel().price)- Number(_swdoc.origPrice));

	_swdoc.UpdateFormFromData();	
}

function setup_form_fields()
{
	


	if(_swdoc.GetArg("customise")=="1")
	{
		_swdoc.MF().Tab1.ShowTabItem(1,false);
	}else
	{
		_swdoc.MF().Tab1.ShowTabItem(1,_swdoc.oRel().flg_isoptional==1);
	}

	_een(_swdoc.MF().flg_include,(_swdoc.oRel().flg_isoptional==1));
		
	if(_swdoc.oRel().pk_auto_id<1)
	{
		var strService = _swdoc.GetArg("fk_service");
		_swdoc.oRel().fk_service = strService;
	}
	_swdoc.strOrigValueCost = _swdoc.oRel().total_unit_cost;
	_swdoc.strOrigValuePrice = _swdoc.oRel().price;
	_swdoc.origPrice = _swdoc.oRel().price; 
	_swdoc.origCost = _swdoc.oRel().total_cost_for_item; 
	
	if(_swdoc.oRel().fk_key>0)
	{
		_evi(_swdoc.MF().fld_gl_code,false);
		_evi(_swdoc.MF().lbl_gl_code,false);
	}
	
	if(_swdoc.GetArg("selection")=="1")
	{
		_een(_swdoc.MF().fld_apply_type,false);
		_een(_swdoc.MF().fld_total_unit_costs,false);
		_een(_swdoc.MF().fld_units,false);
		_een(_swdoc.MF().fld_price,false);
		_een(_swdoc.MF().flg_include,false);
		_een(_swdoc.MF().flg_optional,false);
	
	}


}]]>
					</code>
				</method>
				<method>
					<name>OnDataSaved</name>
					<code>
						<![CDATA[OnDataSaved()
{
	// TODO: Add your event handler code here

	_swdoc.boolFigureChanged = true;
	if(_swdoc.oRel().flg_cancustomise=="1")
	{
		var newCost = _swdoc.oRel().total_cost_for_item;
		if(newCost=="")
			newCost = "0";
		if(_swdoc.origCost=="")
			_swdoc.origCost="0";
		var costChanges = parseFloat(_swdoc.oRel().total_cost_for_item) - parseFloat(_swdoc.origCost); 

		var newPrice = _swdoc.oRel().price;
		if(newPrice=="")
			newPrice = "0";
		if(_swdoc.origPrice=="")
			_swdoc.origPrice="0";
		var priceChanges = parseFloat(newPrice) - parseFloat(_swdoc.origPrice); 

		var oRec  = app.g.get_sqrecordset("service/get_service_relations.select","relid="+pfu(_swdoc.oRel().pk_auto_id));
		while (oRec.Fetch())
		{ 
			var id = app.g.get_field(oRec, "pk_auto_id");
			var cust_diff =  app.g.get_field(oRec,"customise_diff");
			if(cust_diff=="")
				cust_diff="0";
			if(costChanges=="")
				costChanges="0";
			var price_diff =  app.g.get_field(oRec,"price_diff");
			if(price_diff=="")
				price_diff="0";
			if(priceChanges=="")
				priceChanges="0";
			cust_diff = parseFloat(cust_diff) - parseFloat(costChanges);
			price_diff = parseFloat(price_diff) - parseFloat(priceChanges);

			var strParams = "cd="+pfu(cust_diff)+"&pd="+pfu(price_diff)+"&id="+pfu(id);
			app.g.submitsqs("service/update_component_diffs.update", strParams);
		}
	}
	
}]]>
					</code>
				</method>
			</methods>
		</javascript>
	</configuration>
	<layouts>
		<layout>
			<appearance>
				<width>476</width>
				<height>262</height>
				<backgroundColor>#ffffff</backgroundColor>
				<fillColour>#ffffff</fillColour>
				<textColour >#000000</textColour >
				<font  size="8">Arial</font>
			</appearance>
			<controls>
				<control>
					<general>
						<name>fld_description</name>
						<type>Field</type>
						<group>Tab1:0</group>
					</general>
					<appearance>
						<index>0</index>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
						<borderStyle>Rectangle</borderStyle>
					</appearance>
					<objectPlacement>
						<position>
							<top>36</top>
							<left>160</left>
							<right>410</right>
							<bottom>54</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>0</left>
							<right>100</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
						<binding>sc_rels.description</binding>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<type>Text Edit</type>
						<flags>
							<invisible>false</invisible>
							<readOnly>false</readOnly>
							<mandatory>true</mandatory>
							<mandatoryLabelBackground>false</mandatoryLabelBackground>
							<mandatoryLabelText>false</mandatoryLabelText>
							<allowNullValue>false</allowNullValue>
							<skipTabStop>false</skipTabStop>
							<disabled>true</disabled>
							<protected>false</protected>
							<noMacroExpand>false</noMacroExpand>
							<readOnlyInit>false</readOnlyInit>
							<autoCompleteField>false</autoCompleteField>
							<editUnlimitedText>false</editUnlimitedText>
							<url>false</url>
						</flags>
						<textLineCount>0</textLineCount>
						<textInputFormat>Text</textInputFormat>
						<properties>
							<disabledBackgroundColor>#eeeeee</disabledBackgroundColor>
							<borderColor>#c0c0c0</borderColor>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<name>fld_apply_type</name>
						<type>Field</type>
						<group>Tab1:0</group>
					</general>
					<appearance>
						<index>1</index>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
						<borderStyle>Rectangle</borderStyle>
					</appearance>
					<objectPlacement>
						<position>
							<top>58</top>
							<left>160</left>
							<right>410</right>
							<bottom>76</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>0</left>
							<right>100</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
						<binding>sc_rels.apply_type</binding>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<type>Pick List</type>
						<flags>
							<invisible>false</invisible>
							<readOnly>false</readOnly>
							<mandatory>true</mandatory>
							<mandatoryLabelBackground>false</mandatoryLabelBackground>
							<mandatoryLabelText>false</mandatoryLabelText>
							<allowNullValue>false</allowNullValue>
							<skipTabStop>false</skipTabStop>
							<disabled>false</disabled>
							<protected>false</protected>
							<noMacroExpand>false</noMacroExpand>
							<readOnlyInit>false</readOnlyInit>
							<comboAutoUpdate>false</comboAutoUpdate>
							<comboNewValues>false</comboNewValues>
							<useDDPickList>false</useDDPickList>
						</flags>
						<textLineCount>0</textLineCount>
						<textInputFormat>Text</textInputFormat>
						<properties>
							<image>#eeeeee</image>
							<listItems>Per Request|Per Subscription|</listItems>
							<disabledBackgroundColor>#eeeeee</disabledBackgroundColor>
							<borderColor>#c0c0c0</borderColor>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<name>fld_total_unit_costs</name>
						<type>Field</type>
						<group>Tab1:0</group>
					</general>
					<appearance>
						<index>2</index>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
						<borderStyle>Rectangle</borderStyle>
					</appearance>
					<objectPlacement>
						<position>
							<top>81</top>
							<left>160</left>
							<right>410</right>
							<bottom>99</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>0</left>
							<right>100</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
						<binding>sc_rels.total_unit_cost</binding>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<type>Text Edit</type>
						<textLineCount>0</textLineCount>
						<textInputFormat>Text</textInputFormat>
						<properties>
							<disabledBackgroundColor>#eeeeee</disabledBackgroundColor>
							<borderColor>#c0c0c0</borderColor>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<name>fld_units</name>
						<type>Field</type>
						<group>Tab1:0</group>
					</general>
					<appearance>
						<index>3</index>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
						<borderStyle>Rectangle</borderStyle>
					</appearance>
					<objectPlacement>
						<position>
							<top>103</top>
							<left>160</left>
							<right>410</right>
							<bottom>121</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>0</left>
							<right>100</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
						<binding>sc_rels.units</binding>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<type>Text Edit</type>
						<textLineCount>0</textLineCount>
						<textInputFormat>Text</textInputFormat>
						<properties>
							<disabledBackgroundColor>#eeeeee</disabledBackgroundColor>
							<borderColor>#c0c0c0</borderColor>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<name>fld_total_cost</name>
						<type>Field</type>
						<group>Tab1:0</group>
					</general>
					<appearance>
						<index>4</index>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
						<borderStyle>Rectangle</borderStyle>
					</appearance>
					<objectPlacement>
						<position>
							<top>124</top>
							<left>160</left>
							<right>410</right>
							<bottom>142</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>0</left>
							<right>100</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
						<binding>sc_rels.total_cost_for_item</binding>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<type>Text Edit</type>
						<flags>
							<invisible>false</invisible>
							<readOnly>false</readOnly>
							<mandatory>false</mandatory>
							<mandatoryLabelBackground>false</mandatoryLabelBackground>
							<mandatoryLabelText>false</mandatoryLabelText>
							<allowNullValue>false</allowNullValue>
							<skipTabStop>false</skipTabStop>
							<disabled>true</disabled>
							<protected>false</protected>
							<noMacroExpand>false</noMacroExpand>
							<readOnlyInit>false</readOnlyInit>
							<autoCompleteField>false</autoCompleteField>
							<editUnlimitedText>false</editUnlimitedText>
							<url>false</url>
						</flags>
						<textLineCount>0</textLineCount>
						<textInputFormat>Text</textInputFormat>
						<properties>
							<image>#eeeeee</image>
							<borderColor>#c0c0c0</borderColor>
							<disabledBackgroundColor>#eeeeee</disabledBackgroundColor>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<name>fld_price</name>
						<type>Field</type>
						<group>Tab1:0</group>
					</general>
					<appearance>
						<index>5</index>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
						<borderStyle>Rectangle</borderStyle>
					</appearance>
					<objectPlacement>
						<position>
							<top>146</top>
							<left>160</left>
							<right>410</right>
							<bottom>164</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>0</left>
							<right>100</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
						<binding>sc_rels.price</binding>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<type>Text Edit</type>
						<textLineCount>0</textLineCount>
						<textInputFormat>Text</textInputFormat>
						<properties>
							<image>#eeeeee</image>
							<borderColor>#c0c0c0</borderColor>
							<disabledBackgroundColor>#eeeeee</disabledBackgroundColor>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<name>flg_include</name>
						<type>Field</type>
						<flags>
							<transparent>true</transparent>
							<xpStyle>false</xpStyle>
							<hasShadow>false</hasShadow>
							<toolbarButtonStyle>false</toolbarButtonStyle>
							<cache>false</cache>
							<hasBorder>false</hasBorder>
							<hasCheckbox>false</hasCheckbox>
						</flags>
						<group>Tab1:0</group>
					</general>
					<appearance>
						<index>6</index>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
						<borderStyle>None</borderStyle>
					</appearance>
					<objectPlacement>
						<position>
							<top>211</top>
							<left>154</left>
							<right>404</right>
							<bottom>227</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>0</left>
							<right>100</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
						<binding>sc_rels.flg_include</binding>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<type>Form Flags</type>
						<textLineCount>0</textLineCount>
						<textInputFormat>Text</textInputFormat>
						<properties>
							<disabledBackgroundColor>#eeeeee</disabledBackgroundColor>
							<flagItems>Include in basic cost calculation^1|</flagItems>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<name>flg_optional</name>
						<type>Field</type>
						<flags>
							<transparent>true</transparent>
							<xpStyle>false</xpStyle>
							<hasShadow>false</hasShadow>
							<toolbarButtonStyle>false</toolbarButtonStyle>
							<cache>false</cache>
							<hasBorder>false</hasBorder>
							<hasCheckbox>false</hasCheckbox>
						</flags>
						<group>Tab1:0</group>
					</general>
					<appearance>
						<index>7</index>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
						<borderStyle>None</borderStyle>
					</appearance>
					<objectPlacement>
						<position>
							<top>191</top>
							<left>154</left>
							<right>404</right>
							<bottom>207</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>0</left>
							<right>100</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
						<binding>sc_rels.flg_isoptional</binding>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<type>Form Flags</type>
						<textLineCount>0</textLineCount>
						<textInputFormat>Text</textInputFormat>
						<properties>
							<disabledBackgroundColor>#eeeeee</disabledBackgroundColor>
							<flagItems>Is a standard component^1|</flagItems>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<type>FieldName</type>
						<flags>
							<transparent>true</transparent>
							<xpStyle>false</xpStyle>
							<hasShadow>false</hasShadow>
							<toolbarButtonStyle>false</toolbarButtonStyle>
							<cache>false</cache>
							<hasBorder>false</hasBorder>
							<hasCheckbox>false</hasCheckbox>
						</flags>
					</general>
					<appearance>
						<index>8</index>
						<caption>Fk Service</caption>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
						<alignment>Right</alignment>
						<borderStyle>None</borderStyle>
						<fillStyle>Solid</fillStyle>
					</appearance>
					<objectPlacement>
						<position>
							<top>300</top>
							<left>160</left>
							<right>270</right>
							<bottom>316</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>0</left>
							<right>0</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
						<binding>sc_rels.fk_service</binding>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<flags>
							<invisible>true</invisible>
							<skipTabStop>false</skipTabStop>
							<disabled>false</disabled>
							<protected>false</protected>
							<noMacroExpand>false</noMacroExpand>
							<multiLine>false</multiLine>
						</flags>
						<properties>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<type>Field</type>
					</general>
					<appearance>
						<index>9</index>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
						<borderStyle>3-D Sunken</borderStyle>
					</appearance>
					<objectPlacement>
						<position>
							<top>300</top>
							<left>280</left>
							<right>530</right>
							<bottom>316</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>0</left>
							<right>100</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
						<binding>sc_rels.fk_service</binding>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<type>Text Edit</type>
						<flags>
							<invisible>true</invisible>
							<readOnly>false</readOnly>
							<mandatory>false</mandatory>
							<mandatoryLabelBackground>false</mandatoryLabelBackground>
							<mandatoryLabelText>false</mandatoryLabelText>
							<allowNullValue>false</allowNullValue>
							<skipTabStop>false</skipTabStop>
							<disabled>false</disabled>
							<protected>false</protected>
							<noMacroExpand>false</noMacroExpand>
							<readOnlyInit>false</readOnlyInit>
							<autoCompleteField>false</autoCompleteField>
							<editUnlimitedText>false</editUnlimitedText>
							<url>false</url>
						</flags>
						<textLineCount>0</textLineCount>
						<textInputFormat>Text</textInputFormat>
						<properties>
							<disabledBackgroundColor>#eeeeee</disabledBackgroundColor>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<type>FieldName</type>
						<flags>
							<transparent>true</transparent>
							<xpStyle>false</xpStyle>
							<hasShadow>false</hasShadow>
							<toolbarButtonStyle>false</toolbarButtonStyle>
							<cache>false</cache>
							<hasBorder>false</hasBorder>
							<hasCheckbox>false</hasCheckbox>
						</flags>
						<group>Tab1:0</group>
					</general>
					<appearance>
						<index>10</index>
						<caption>Unit Cost</caption>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
						<alignment>Right</alignment>
						<borderStyle>None</borderStyle>
						<fillStyle>Solid</fillStyle>
					</appearance>
					<objectPlacement>
						<position>
							<top>81</top>
							<left>40</left>
							<right>150</right>
							<bottom>97</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>0</left>
							<right>0</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
						<binding>sc_rels.total_unit_cost</binding>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<properties>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<type>FieldName</type>
						<flags>
							<transparent>true</transparent>
							<xpStyle>false</xpStyle>
							<hasShadow>false</hasShadow>
							<toolbarButtonStyle>false</toolbarButtonStyle>
							<cache>false</cache>
							<hasBorder>false</hasBorder>
							<hasCheckbox>false</hasCheckbox>
						</flags>
						<group>Tab1:0</group>
					</general>
					<appearance>
						<index>11</index>
						<caption>Units</caption>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
						<alignment>Right</alignment>
						<borderStyle>None</borderStyle>
						<fillStyle>Solid</fillStyle>
					</appearance>
					<objectPlacement>
						<position>
							<top>103</top>
							<left>40</left>
							<right>150</right>
							<bottom>119</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>0</left>
							<right>0</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
						<binding>sc_rels.units</binding>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<properties>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<name>Label1</name>
						<type>FieldName</type>
						<flags>
							<transparent>true</transparent>
							<xpStyle>false</xpStyle>
							<hasShadow>false</hasShadow>
							<toolbarButtonStyle>false</toolbarButtonStyle>
							<cache>false</cache>
							<hasBorder>false</hasBorder>
							<hasCheckbox>false</hasCheckbox>
						</flags>
						<group>Tab1:0</group>
					</general>
					<appearance>
						<index>12</index>
						<caption>Apply Type</caption>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
						<alignment>Right</alignment>
						<borderStyle>None</borderStyle>
						<fillStyle>Solid</fillStyle>
					</appearance>
					<objectPlacement>
						<position>
							<top>58</top>
							<left>87</left>
							<right>150</right>
							<bottom>74</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>0</left>
							<right>0</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
						<binding>sc_rels.apply_type</binding>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<properties>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<name>Tab1</name>
						<type>TabControl</type>
						<flags>
							<transparent>true</transparent>
							<xpStyle>false</xpStyle>
							<hasShadow>false</hasShadow>
							<toolbarButtonStyle>false</toolbarButtonStyle>
							<cache>false</cache>
							<hasBorder>false</hasBorder>
							<hasCheckbox>false</hasCheckbox>
						</flags>
					</general>
					<appearance>
						<index>13</index>
						<caption>Tab1</caption>
						<backgroundColor>#ded7ce</backgroundColor>
						<foregroundColor>#f7f3ef</foregroundColor>
						<font  size="8">Arial</font>
						<borderStyle>None</borderStyle>
					</appearance>
					<objectPlacement>
						<position>
							<top>6</top>
							<left>13</left>
							<right>461</right>
							<bottom>254</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>0</left>
							<right>100</right>
							<bottom>100</bottom>
						</scaling>
					</objectPlacement>
					<data>
					</data>
					<tabStyle>Top</tabStyle>
					<tabSize>19</tabSize>
					<items>
						<item>
							<name>Offering</name>
							<properties>56=#8aa8e4|_flags=0</properties>
							<textBorder>None</textBorder>
							<textBackgroundColor>#ffffff</textBackgroundColor>
							<controlInfo>
								<mouseOverCursor>Window Default</mouseOverCursor>
								<properties>
									<tabColor>#8aa8e4</tabColor>
								</properties>
							</controlInfo>
						</item>
						<item>
							<name>Upgrade/Downgrade Options</name>
							<properties>56=#ffdb75|_flags=0</properties>
							<textBorder>None</textBorder>
							<textBackgroundColor>#ffffff</textBackgroundColor>
							<controlInfo>
								<mouseOverCursor>Window Default</mouseOverCursor>
								<properties>
									<tabColor>#ffdb75</tabColor>
								</properties>
							</controlInfo>
						</item>
					</items>
					<selectedTextFont  size="8">Arial</selectedTextFont>
					<selectedTextColor>#000000</selectedTextColor>
					<deselectedTextColor>#000000</deselectedTextColor>
					<tabSlopeLeft>2</tabSlopeLeft>
					<tabSlopeRight>2</tabSlopeRight>
					<deselectedTabHeightOffset>1</deselectedTabHeightOffset>
					<tabSpacing>0</tabSpacing>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<properties>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<name>sl_custom</name>
						<type>SqlTable</type>
						<flags>
							<transparent>false</transparent>
							<xpStyle>true</xpStyle>
							<hasShadow>false</hasShadow>
							<toolbarButtonStyle>false</toolbarButtonStyle>
							<cache>false</cache>
							<hasBorder>false</hasBorder>
							<hasCheckbox>false</hasCheckbox>
							<showHeader>true</showHeader>
							<verticalGridLines>true</verticalGridLines>
							<horizontalGridLines>true</horizontalGridLines>
							<autoLoad>true</autoLoad>
							<allowMultiSelect>false</allowMultiSelect>
						</flags>
						<group>Tab1:1</group>
					</general>
					<appearance>
						<index>14</index>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
						<borderStyle>Rectangle</borderStyle>
					</appearance>
					<objectPlacement>
						<position>
							<top>64</top>
							<left>22</left>
							<right>449</right>
							<bottom>248</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>0</left>
							<right>100</right>
							<bottom>100</bottom>
						</scaling>
					</objectPlacement>
					<data>
					</data>
					<columns>
						<controlInfo>
							<mouseOverCursor>Window Default</mouseOverCursor>
							<type>Text Edit</type>
							<flags>
								<invisible>false</invisible>
								<readOnly>false</readOnly>
								<mandatory>false</mandatory>
								<mandatoryLabelBackground>false</mandatoryLabelBackground>
								<mandatoryLabelText>false</mandatoryLabelText>
								<allowNullValue>false</allowNullValue>
								<skipTabStop>false</skipTabStop>
								<disabled>false</disabled>
								<protected>false</protected>
								<noMacroExpand>false</noMacroExpand>
								<readOnlyInit>false</readOnlyInit>
								<autoCompleteField>false</autoCompleteField>
								<editUnlimitedText>false</editUnlimitedText>
								<url>false</url>
								<hidden>false</hidden>
								<allowResize>true</allowResize>
								<allowSort>true</allowSort>
							</flags>
							<textLineCount>0</textLineCount>
							<textInputFormat>Text</textInputFormat>
							<properties>
								<column>description</column>
							</properties>
							<name>Name</name>
							<width>120</width>
							<image>-1</image>
							<dataColumn>0</dataColumn>
						</controlInfo>
						<controlInfo>
							<mouseOverCursor>Window Default</mouseOverCursor>
							<type>Text Edit</type>
							<flags>
								<invisible>false</invisible>
								<readOnly>false</readOnly>
								<mandatory>false</mandatory>
								<mandatoryLabelBackground>false</mandatoryLabelBackground>
								<mandatoryLabelText>false</mandatoryLabelText>
								<allowNullValue>false</allowNullValue>
								<skipTabStop>false</skipTabStop>
								<disabled>false</disabled>
								<protected>false</protected>
								<noMacroExpand>false</noMacroExpand>
								<readOnlyInit>false</readOnlyInit>
								<autoCompleteField>false</autoCompleteField>
								<editUnlimitedText>false</editUnlimitedText>
								<url>false</url>
								<hidden>false</hidden>
								<allowResize>true</allowResize>
								<allowSort>true</allowSort>
							</flags>
							<textLineCount>0</textLineCount>
							<textInputFormat>Text</textInputFormat>
							<properties>
								<column>total_unit_cost</column>
							</properties>
							<name>Unit Cost</name>
							<width>120</width>
							<image>-1</image>
							<dataColumn>1</dataColumn>
						</controlInfo>
						<controlInfo>
							<mouseOverCursor>Window Default</mouseOverCursor>
							<type>Text Edit</type>
							<flags>
								<invisible>false</invisible>
								<readOnly>false</readOnly>
								<mandatory>false</mandatory>
								<mandatoryLabelBackground>false</mandatoryLabelBackground>
								<mandatoryLabelText>false</mandatoryLabelText>
								<allowNullValue>false</allowNullValue>
								<skipTabStop>false</skipTabStop>
								<disabled>false</disabled>
								<protected>false</protected>
								<noMacroExpand>false</noMacroExpand>
								<readOnlyInit>false</readOnlyInit>
								<autoCompleteField>false</autoCompleteField>
								<editUnlimitedText>false</editUnlimitedText>
								<url>false</url>
								<hidden>true</hidden>
								<allowResize>true</allowResize>
								<allowSort>true</allowSort>
							</flags>
							<textLineCount>0</textLineCount>
							<textInputFormat>Text</textInputFormat>
							<properties>
								<column>fk_key</column>
							</properties>
							<name>key</name>
							<width>21</width>
							<image>-1</image>
							<dataColumn>2</dataColumn>
						</controlInfo>
						<controlInfo>
							<mouseOverCursor>Window Default</mouseOverCursor>
							<type>Text Edit</type>
							<flags>
								<invisible>false</invisible>
								<readOnly>false</readOnly>
								<mandatory>false</mandatory>
								<mandatoryLabelBackground>false</mandatoryLabelBackground>
								<mandatoryLabelText>false</mandatoryLabelText>
								<allowNullValue>false</allowNullValue>
								<skipTabStop>false</skipTabStop>
								<disabled>false</disabled>
								<protected>false</protected>
								<noMacroExpand>false</noMacroExpand>
								<readOnlyInit>false</readOnlyInit>
								<autoCompleteField>false</autoCompleteField>
								<editUnlimitedText>false</editUnlimitedText>
								<url>false</url>
								<hidden>true</hidden>
								<allowResize>true</allowResize>
								<allowSort>true</allowSort>
							</flags>
							<textLineCount>0</textLineCount>
							<textInputFormat>Text</textInputFormat>
							<properties>
								<column>pk_auto_id</column>
							</properties>
							<name>pk_auto_id</name>
							<width>19</width>
							<image>-1</image>
							<dataColumn>3</dataColumn>
						</controlInfo>
						<controlInfo>
							<mouseOverCursor>Window Default</mouseOverCursor>
							<type>Text Edit</type>
							<flags>
								<invisible>false</invisible>
								<readOnly>false</readOnly>
								<mandatory>false</mandatory>
								<mandatoryLabelBackground>false</mandatoryLabelBackground>
								<mandatoryLabelText>false</mandatoryLabelText>
								<allowNullValue>false</allowNullValue>
								<skipTabStop>false</skipTabStop>
								<disabled>false</disabled>
								<protected>false</protected>
								<noMacroExpand>false</noMacroExpand>
								<readOnlyInit>false</readOnlyInit>
								<autoCompleteField>false</autoCompleteField>
								<editUnlimitedText>false</editUnlimitedText>
								<url>false</url>
								<hidden>false</hidden>
								<allowResize>true</allowResize>
								<allowSort>true</allowSort>
							</flags>
							<textLineCount>0</textLineCount>
							<textInputFormat>Text</textInputFormat>
							<properties>
								<column>units</column>
							</properties>
							<name>Units</name>
							<width>120</width>
							<image>-1</image>
							<dataColumn>4</dataColumn>
						</controlInfo>
						<controlInfo>
							<mouseOverCursor>Window Default</mouseOverCursor>
							<type>Text Edit</type>
							<flags>
								<invisible>false</invisible>
								<readOnly>false</readOnly>
								<mandatory>false</mandatory>
								<mandatoryLabelBackground>false</mandatoryLabelBackground>
								<mandatoryLabelText>false</mandatoryLabelText>
								<allowNullValue>false</allowNullValue>
								<skipTabStop>false</skipTabStop>
								<disabled>false</disabled>
								<protected>false</protected>
								<noMacroExpand>false</noMacroExpand>
								<readOnlyInit>false</readOnlyInit>
								<autoCompleteField>false</autoCompleteField>
								<editUnlimitedText>false</editUnlimitedText>
								<url>false</url>
								<hidden>true</hidden>
								<allowResize>true</allowResize>
								<allowSort>true</allowSort>
							</flags>
							<textLineCount>0</textLineCount>
							<textInputFormat>Text</textInputFormat>
							<properties>
								<column>cost_weighting</column>
							</properties>
							<name>Mark Up (%)</name>
							<width>14</width>
							<image>-1</image>
							<dataColumn>5</dataColumn>
						</controlInfo>
						<controlInfo>
							<mouseOverCursor>Window Default</mouseOverCursor>
							<type>Text Edit</type>
							<flags>
								<invisible>false</invisible>
								<readOnly>false</readOnly>
								<mandatory>false</mandatory>
								<mandatoryLabelBackground>false</mandatoryLabelBackground>
								<mandatoryLabelText>false</mandatoryLabelText>
								<allowNullValue>false</allowNullValue>
								<skipTabStop>false</skipTabStop>
								<disabled>false</disabled>
								<protected>false</protected>
								<noMacroExpand>false</noMacroExpand>
								<readOnlyInit>false</readOnlyInit>
								<autoCompleteField>false</autoCompleteField>
								<editUnlimitedText>false</editUnlimitedText>
								<url>false</url>
								<hidden>false</hidden>
								<allowResize>true</allowResize>
								<allowSort>true</allowSort>
							</flags>
							<textLineCount>0</textLineCount>
							<textInputFormat>Text</textInputFormat>
							<properties>
								<column>total_cost_for_item</column>
							</properties>
							<name>Total Cost</name>
							<width>120</width>
							<image>-1</image>
							<dataColumn>6</dataColumn>
						</controlInfo>
						<controlInfo>
							<mouseOverCursor>Window Default</mouseOverCursor>
							<type>Text Edit</type>
							<flags>
								<invisible>false</invisible>
								<readOnly>false</readOnly>
								<mandatory>false</mandatory>
								<mandatoryLabelBackground>false</mandatoryLabelBackground>
								<mandatoryLabelText>false</mandatoryLabelText>
								<allowNullValue>false</allowNullValue>
								<skipTabStop>false</skipTabStop>
								<disabled>false</disabled>
								<protected>false</protected>
								<noMacroExpand>false</noMacroExpand>
								<readOnlyInit>false</readOnlyInit>
								<autoCompleteField>false</autoCompleteField>
								<editUnlimitedText>false</editUnlimitedText>
								<url>false</url>
								<hidden>false</hidden>
								<allowResize>true</allowResize>
								<allowSort>true</allowSort>
							</flags>
							<textLineCount>0</textLineCount>
							<textInputFormat>Text</textInputFormat>
							<properties>
								<column>price</column>
							</properties>
							<name>Price</name>
							<width>120</width>
							<image>-1</image>
							<dataColumn>7</dataColumn>
						</controlInfo>
					</columns>
					<sortColumn>-1</sortColumn>
					<sortDescending>false</sortDescending>
					<headerHeight>18</headerHeight>
					<rowHeight>16</rowHeight>
					<selectedColor>#00008b</selectedColor>
					<selectedTextColor>#ffffff</selectedTextColor>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<properties>
							<highlightStyle>0</highlightStyle>
							<borderColor>#d3c9b6</borderColor>
							<sqlSource>swdata</sqlSource>
							<table>sc_rels</table>
							<listFilter>swc=fk_service_rels&amp;kvs=&amp;[sc_rels.pk_auto_id]</listFilter>
							<editRecordForm>Form.service_component</editRecordForm>
							<storedQuery>common.load_by_colname</storedQuery>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<name>btn_remove_customisable</name>
						<type>EventButton</type>
						<group>Tab1:1</group>
					</general>
					<appearance>
						<index>15</index>
						<caption>Remove</caption>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
					</appearance>
					<objectPlacement>
						<position>
							<top>37</top>
							<left>318</left>
							<right>381</right>
							<bottom>59</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>100</left>
							<right>100</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<flags>
							<invisible>false</invisible>
							<skipTabStop>false</skipTabStop>
							<disabled>true</disabled>
							<protected>false</protected>
							<noMacroExpand>false</noMacroExpand>
							<multiLine>false</multiLine>
						</flags>
						<properties>
							<backgroundColor>#ff9900</backgroundColor>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<name>btn_view_customisable</name>
						<type>EventButton</type>
						<group>Tab1:1</group>
					</general>
					<appearance>
						<index>16</index>
						<caption>View</caption>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
					</appearance>
					<objectPlacement>
						<position>
							<top>37</top>
							<left>251</left>
							<right>314</right>
							<bottom>59</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>100</left>
							<right>100</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<flags>
							<invisible>false</invisible>
							<skipTabStop>false</skipTabStop>
							<disabled>true</disabled>
							<protected>false</protected>
							<noMacroExpand>false</noMacroExpand>
							<multiLine>false</multiLine>
						</flags>
						<properties>
							<backgroundColor>#ff9900</backgroundColor>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<name>txt_label</name>
						<type>Text</type>
						<flags>
							<transparent>true</transparent>
							<xpStyle>false</xpStyle>
							<hasShadow>false</hasShadow>
							<toolbarButtonStyle>false</toolbarButtonStyle>
							<cache>false</cache>
							<hasBorder>false</hasBorder>
							<hasCheckbox>false</hasCheckbox>
						</flags>
						<group>Tab1:0</group>
					</general>
					<appearance>
						<index>17</index>
						<caption>Name</caption>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
						<alignment>Right</alignment>
						<borderStyle>None</borderStyle>
						<fillStyle>Solid</fillStyle>
					</appearance>
					<objectPlacement>
						<position>
							<top>33</top>
							<left>55</left>
							<right>150</right>
							<bottom>58</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>0</left>
							<right>0</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<properties>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<name>Label2</name>
						<type>FieldName</type>
						<flags>
							<transparent>true</transparent>
							<xpStyle>false</xpStyle>
							<hasShadow>false</hasShadow>
							<toolbarButtonStyle>false</toolbarButtonStyle>
							<cache>false</cache>
							<hasBorder>false</hasBorder>
							<hasCheckbox>false</hasCheckbox>
						</flags>
						<group>Tab1:0</group>
					</general>
					<appearance>
						<index>18</index>
						<caption>Total Cost For Item</caption>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
						<alignment>Right</alignment>
						<borderStyle>None</borderStyle>
						<fillStyle>Solid</fillStyle>
					</appearance>
					<objectPlacement>
						<position>
							<top>124</top>
							<left>53</left>
							<right>150</right>
							<bottom>140</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>0</left>
							<right>0</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
						<binding>sc_rels.total_cost_for_item</binding>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<properties>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<name>Label3</name>
						<type>FieldName</type>
						<flags>
							<transparent>true</transparent>
							<xpStyle>false</xpStyle>
							<hasShadow>false</hasShadow>
							<toolbarButtonStyle>false</toolbarButtonStyle>
							<cache>false</cache>
							<hasBorder>false</hasBorder>
							<hasCheckbox>false</hasCheckbox>
						</flags>
						<group>Tab1:0</group>
					</general>
					<appearance>
						<index>19</index>
						<caption>Price</caption>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
						<alignment>Right</alignment>
						<borderStyle>None</borderStyle>
						<fillStyle>Solid</fillStyle>
					</appearance>
					<objectPlacement>
						<position>
							<top>146</top>
							<left>118</left>
							<right>150</right>
							<bottom>162</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>0</left>
							<right>0</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
						<binding>sc_rels.price</binding>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<properties>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<name>mbtn_add_comp</name>
						<type>MenuButton</type>
						<flags>
							<transparent>false</transparent>
							<xpStyle>true</xpStyle>
							<hasShadow>false</hasShadow>
							<toolbarButtonStyle>false</toolbarButtonStyle>
							<cache>false</cache>
							<hasBorder>false</hasBorder>
							<hasCheckbox>false</hasCheckbox>
						</flags>
						<group>Tab1:1</group>
					</general>
					<appearance>
						<index>20</index>
						<caption>Add</caption>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
					</appearance>
					<objectPlacement>
						<position>
							<top>37</top>
							<left>385</left>
							<right>448</right>
							<bottom>59</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>100</left>
							<right>100</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<flags>
							<invisible>false</invisible>
							<skipTabStop>false</skipTabStop>
							<disabled>false</disabled>
							<protected>true</protected>
							<noMacroExpand>false</noMacroExpand>
							<multiLine>false</multiLine>
						</flags>
						<properties>
							<commands>Service^1|Configuration Type^2|</commands>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<name>lbl_gl_code</name>
						<type>FieldName</type>
						<flags>
							<transparent>true</transparent>
							<xpStyle>false</xpStyle>
							<hasShadow>false</hasShadow>
							<toolbarButtonStyle>false</toolbarButtonStyle>
							<cache>false</cache>
							<hasBorder>false</hasBorder>
							<hasCheckbox>false</hasCheckbox>
						</flags>
						<group>Tab1:0</group>
					</general>
					<appearance>
						<index>21</index>
						<caption>GL Code</caption>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
						<alignment>Right</alignment>
						<borderStyle>None</borderStyle>
						<fillStyle>Solid</fillStyle>
					</appearance>
					<objectPlacement>
						<position>
							<top>168</top>
							<left>104</left>
							<right>150</right>
							<bottom>184</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>0</left>
							<right>0</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
						<binding>sc_rels.gl_code</binding>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<properties>
						</properties>
					</controlInfo>
				</control>
				<control>
					<general>
						<name>fld_gl_code</name>
						<type>Field</type>
						<group>Tab1:0</group>
					</general>
					<appearance>
						<index>22</index>
						<backgroundColor>#ffffff</backgroundColor>
						<foregroundColor>#000000</foregroundColor>
						<font  size="8">Arial</font>
						<borderStyle>Rectangle</borderStyle>
					</appearance>
					<objectPlacement>
						<position>
							<top>168</top>
							<left>160</left>
							<right>410</right>
							<bottom>186</bottom>
						</position>
						<scaling>
							<top>0</top>
							<left>0</left>
							<right>100</right>
							<bottom>0</bottom>
						</scaling>
					</objectPlacement>
					<data>
						<binding>sc_rels.gl_code</binding>
					</data>
					<controlInfo>
						<mouseOverCursor>Window Default</mouseOverCursor>
						<type>Text Edit</type>
						<flags>
							<invisible>false</invisible>
							<readOnly>true</readOnly>
							<mandatory>false</mandatory>
							<mandatoryLabelBackground>false</mandatoryLabelBackground>
							<mandatoryLabelText>false</mandatoryLabelText>
							<allowNullValue>false</allowNullValue>
							<skipTabStop>false</skipTabStop>
							<disabled>false</disabled>
							<protected>false</protected>
							<noMacroExpand>false</noMacroExpand>
							<readOnlyInit>false</readOnlyInit>
							<autoCompleteField>false</autoCompleteField>
							<editUnlimitedText>false</editUnlimitedText>
							<url>false</url>
						</flags>
						<textLineCount>0</textLineCount>
						<textInputFormat>Text</textInputFormat>
						<properties>
							<image>#eeeeee</image>
							<borderColor>#c0c0c0</borderColor>
							<disabledBackgroundColor>#eeeeee</disabledBackgroundColor>
						</properties>
					</controlInfo>
				</control>
			</controls>
			<formActions>
			</formActions>
			<javascript>
				<methods>
					<method>
						<name>OnFormLoaded</name>
						<code>
							<![CDATA[OnFormLoaded(bDataReloaded)
{
	// TODO: Add your event handler code here
	_swdoc.setup_form_fields();

}]]>
						</code>
					</method>
					<method>
						<name>fld_total_unit_costs_OnValueChanged</name>
						<code>
							<![CDATA[fld_total_unit_costs_OnValueChanged(strValue)
{
	// TODO: Add your event handler code here
	if(isNaN(strValue))
	{
		sc_rels.total_unit_cost = _swdoc.strOrigValueCost;
	}else
	{
		sc_rels.total_unit_cost = format_float_to_decimal_str(strValue);
		_swdoc.strOrigValueCost = sc_rels.total_unit_cost;
	}
	//MessageBox(service_costs.total_unit_cost);
	_swdoc.calc_cost();
}]]>
						</code>
					</method>
					<method>
						<name>btn_remove_customisable_OnPressed</name>
						<code>
							<![CDATA[btn_remove_customisable_OnPressed()
{
	if(!app.service.can_update(true))
		return false;
	// TODO: Add your event handler code here
	app.g.sqllist_deldbrow(sl_custom, -1, "", null, "Remove the currently selected component?");
		
	sl_custom.Refresh();
	if(sl_custom.rowCount()<1)
	{
		if(sc_rels.flg_cancustomise!="0") 
		{
			sc_rels.flg_cancustomise="0";
			_swdoc.Save(0);
		}
	}
	sl_custom_OnItemSelected(-1);
	

}]]>
						</code>
					</method>
					<method>
						<name>btn_view_customisable_OnPressed</name>
						<code>
							<![CDATA[btn_view_customisable_OnPressed()
{
	// TODO: Add your event handler code here
	var varKey = sl_custom.GetItemTextRaw(sl_custom.curSel,'pk_auto_id');

	app.OpenFormForEdit('service_component',varKey,"customise=1",true, function(){
		_swdoc.MF().sl_custom.Refresh();
	});
}]]>
						</code>
					</method>
					<method>
						<name>fld_units_OnValueChanged</name>
						<code>
							<![CDATA[fld_units_OnValueChanged(strValue)
{
	// TODO: Add your event handler code here

	_swdoc.calc_cost();
}]]>
						</code>
					</method>
					<method>
						<name>sl_custom_OnItemSelected</name>
						<code>
							<![CDATA[sl_custom_OnItemSelected(nRow)
{
	// TODO: Add your event handler code here
	_een(btn_remove_customisable,(nRow>-1));
	_een(btn_view_customisable,(nRow>-1));
	

}]]>
						</code>
					</method>
					<method>
						<name>sl_custom_OnItemDoubleClicked</name>
						<code>
							<![CDATA[sl_custom_OnItemDoubleClicked(nRow, nCol)
{
	// TODO: Add your event handler code here
	var strKeyValue = app.g.sl_getprikeyvalue(sl_custom, nRow);
	app.OpenFormForEdit("service_component", strKeyValue, "customise=1", true, function(){
		_swdoc.MF().sl_custom.Refresh();
		return false;
	});
}]]>
						</code>
					</method>
					<method>
						<name>fld_price_OnValueChanged</name>
						<code>
							<![CDATA[fld_price_OnValueChanged(strValue)
{
	// TODO: Add your event handler code here
	if(isNaN(strValue))
	{
		sc_rels.price = _swdoc.strOrigValuePrice;
	}
	else
	{
		sc_rels.price = format_float_to_decimal_str(strValue);
		_swdoc.strOrigValuePrice = sc_rels.price;
	}
	_swdoc.calc_price();

}]]>
						</code>
					</method>
					<method>
						<name>flg_optional_OnValueChanged</name>
						<code>
							<![CDATA[flg_optional_OnValueChanged(strValue)
{
	// TODO: Add your event handler code here

		_swdoc.MF().Tab1.ShowTabItem(1,1==strValue);
		_een(flg_include,(1==strValue));
		if(0==strValue)
		{
			sc_rels.flg_include=0;
			_swdoc.UpdateFormFromData();
		}
		
		

}]]>
						</code>
					</method>
					<method>
						<name>mbtn_add_comp_OnMenuItem</name>
						<code>
							<![CDATA[mbtn_add_comp_OnMenuItem(strName, nItemID)
{
	if(!app.service.can_update(true))
		return false;
	var iService =1;	
	var iEntity =2;		

	if(nItemID == iService)
	{
		app.cmdb.search_service(true,"canreset=0&flg_canbundle=1",function(oRes)
		{
			if(oRes.selectedkeys=="")return;
	
			//-- remove duplicates
			var strKeys = "";
			var arrKeys = oRes.selectedkeys.split(",");
			for(var x=0;x<arrKeys.length;x++)
			{
				//-- not in list and not the item we actually have loaded  ok to add
				var foundRowNum = app.g.sqllist_findrow_byvalue(sl_custom,arrKeys[x],'fk_key');
				if((foundRowNum==-1)&&(arrKeys[x] != sc_rels.pk_auto_id))
				{
					if(strKeys!="")strKeys +=",";
					strKeys += arrKeys[x];
				}
			}
			if(strKeys=="")return ;
			
			app.service.add_component_custom(sc_rels.pk_auto_id,strKeys);
		
			_swdoc.MF().sl_custom.Refresh();
			
			if(_swdoc.MF().sl_custom.rowCount()>0)
			{
				if(sc_rels.flg_cancustomise!="1") 
				{
					sc_rels.flg_cancustomise="1";
					_swdoc.Save(0);
				}
			}
		});
		
	}
	else if(nItemID == iEntity)
	{
		app.OpenForm("browse_cmdb_entities", "mode=select", true, function(oRes)
		{
			if(oRes.strSelectedKey=="")return false;
	
			var strKeys = oRes.strSelectedKey;
		
			//-- remove duplicates
			var strKeys = "";
			var arrKeys = oRes.strSelectedKey.split(",");
			for(var x=0;x<arrKeys.length;x++)
			{
				//-- not in list and not the item we actually have loaded  ok to add
				var foundRowNum = app.g.sqllist_findrow_byvalue(sl_custom,arrKeys[x],'fk_key');
				if((foundRowNum==-1)&&(arrKeys[x] != sc_rels.pk_auto_id))
				{
					if(strKeys!="")strKeys +=",";
					strKeys += arrKeys[x];
				}
			}
			if(strKeys=="")return ;
			
			app.service.add_cmdb_component_custom(sc_rels.pk_auto_id,strKeys);
		
			_swdoc.MF().sl_custom.Refresh();
			
			if(_swdoc.MF().sl_custom.rowCount()>0)
			{
				if(sc_rels.flg_cancustomise!="1") 
				{
					sc_rels.flg_cancustomise="1";
					_swdoc.Save(0);
				}
			}
		});
	}
}]]>
						</code>
					</method>
				</methods>
			</javascript>
		</layout>
		<layout>
			<appearance>
				<width>360</width>
				<height>220</height>
				<backgroundColor>#ffffff</backgroundColor>
				<fillColour>#ffffff</fillColour>
				<textColour >#000000</textColour >
				<font  size="8">Arial</font>
			</appearance>
			<controls>
			</controls>
			<formActions>
			</formActions>
			<javascript>
				<methods>
				</methods>
			</javascript>
		</layout>
	</layouts>
</espForm>
