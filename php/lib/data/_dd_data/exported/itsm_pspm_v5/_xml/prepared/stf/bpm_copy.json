{"espForm":{"configuration":{"settings":{"name":"bpm_copy","title":"Copy BPM Process","options":{"allowResize":"true","showMenubar":"false","showToolbar":"true","showStatusBar":"false"}},"javascript":{"methods":{"method":{"name":"(Globals)","code":"var _swdoc = (IsObjectDefined(\"_bHtmlWebClient\"))?top:_swdoc;\nvar boolRefresh = false;\nvar arrWFSwap = new Array();\nvar arrProgress = new Array();\nvar arrStages = new Array();\nvar intType = -1;\n\nfunction MF()\n{\n\treturn _swdoc.mainform;\n}\n\nfunction bpm_process_copy()\n{\n\t_swdoc.arrWFSwap = new Array();\n\t_swdoc.arrProgress = new Array();\n\t_swdoc.arrStages = new Array();\n\n\tvar newWFValue = _swdoc.MF().dst_process.value;\n\tvar oldWFValue = _swdoc.MF().src_process.value;\n\tvar oldConditionId = 0;\n\tvar newConditionId = 0;\n\tvar oldStageId = 0;\n\tvar newStageId = 0;\n\n\t_swdoc.arrWFSwap[\"pk_workflow_id\"]=newWFValue;\n\t_swdoc.arrWFSwap[\"fk_workflow_id\"]=newWFValue;\n\t_swdoc.arrWFSwap[\"flg_active\"]=0;\n\t_swdoc.arrWFSwap[oldWFValue]=newWFValue;\n\n\t_swdoc.intType = 0;\n\tif(_swdoc.MF().src_condition.value!=\"\")\n\t{\n\t\tif(_swdoc.MF().dst_stage.value==\"\")\n\t\t{\n\t\t\tMessageBox(\"The destination stage is mandatory for copying a condition, please select a destination stage.\");\n\t\t\treturn false;\n\t\t}\t\n\t\telse\n\t\t{\n\t\t\tvar oRec = app.g.get_sqrecordset(\"form\/bpm_copy\/get_stage\", \"_swc_title=\"+pfu(_swdoc.MF().src_stage.value)+\"&_swc_fk_workflow_id=\"+pfu(oldWFValue));\n\t\t\tif(oRec.Fetch())\n\t\t\t{\n\t\t\t\toldStageId = app.g.get_field(oRec, \"pk_stage_id\"); \n\t\t\t}\n\n\t\t\tvar oRec = app.g.get_sqrecordset(\"form\/bpm_copy\/get_stage\", \"_swc_title=\"+pfu(_swdoc.MF().dst_stage.value)+\"&_swc_fk_workflow_id=\"+pfu(newWFValue));\n\t\t\tif(oRec.Fetch())\n\t\t\t{\n\t\t\t\tnewStageId = app.g.get_field(oRec, \"pk_stage_id\"); \n\t\t\t}\n\n\t\t\tvar oRec = app.g.get_sqrecordset(\"form\/bpm_copy\/get_conditions\", \"_swc_fk_stage_id=\"+pfu(oldStageId)+\"&_swc_title=\"+pfu(_swdoc.MF().src_condition.value));\n\t\t\tif(oRec.Fetch())\n\t\t\t{\n\t\t\t\toldConditionId = app.g.get_field(oRec, \"pk_condition_id\"); \n\t\t\t}\n\t\t}\n\t}\n\telse\n\t{\n\t\tif(_swdoc.MF().src_stage.value!=\"\")\n\t\t{\n\t\t\tif(_swdoc.MF().dst_process.value==\"\")\n\t\t\t{\n\t\t\t\tMessageBox(\"The destination process is mandatory for copying a stage, please select a destination process.\");\n\t\t\t\treturn false;\n\t\t\t}\t\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar oRec = app.g.get_record(\"bpm_workflow\", _swdoc.MF().dst_process.value);\n\t\t\t\tif(!oRec)\n\t\t\t\t{\n\t\t\t\t\tMessageBox(\"The destination process must be an existing process for copying a stage, please select a destination process.\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t_swdoc.intType = 1;\n\t\t\tvar oRec = app.g.get_sqrecordset(\"form\/bpm_copy\/get_stage\", \"_swc_title=\"+pfu(_swdoc.MF().src_stage.value)+\"&_swc_fk_workflow_id=\"+pfu(oldWFValue));\n\t\t\tif(oRec.Fetch())\n\t\t\t{\n\t\t\t\toldStageId = app.g.get_field(oRec, \"pk_stage_id\"); \n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(_swdoc.MF().src_process.value!=\"\")\n\t\t\t{\n\t\t\t\tif(_swdoc.MF().dst_process.value==\"\")\n\t\t\t\t{\n\t\t\t\t\tMessageBox(\"The destination process is mandatory for copying a process, please select a destination process.\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar oRec = app.g.get_record(\"bpm_workflow\", _swdoc.MF().dst_process.value);\n\t\t\t\t\tif(oRec)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar strMessage = \"The destination process name already exists, and could be used by this or another Service Desk - please enter a different name.\";\n\t\t\t\t\t\tMessageBox(strMessage);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\t\n\t\t\t\t_swdoc.intType = 2;\n\t\t\t}\n\t\t}\n\t}\n\n\tif(_swdoc.intType==0)\n\t{\n\t\t_swdoc.bpm_condition_copy(oldWFValue,newWFValue,oldStageId,newStageId,oldConditionId);\n\t}\n\telse if(_swdoc.intType==1)\n\t{\n\t\tvar newStageId = _swdoc.bpm_stage_copy(oldWFValue,newWFValue,oldStageId);\n\t\t_swdoc.bpm_condition_copy(oldWFValue,newWFValue,oldStageId,newStageId,0);\n\t}\n\telse if(_swdoc.intType==2)\n\t{\n\t\t_swdoc.bpm_workflow_copy(oldWFValue,newWFValue);\n\t}\n\n\t_swdoc.boolRefresh = true;\n\t_swdoc.CloseForm();\n\treturn true;\n}\n\nfunction bpm_workflow_copy(oldWFValue,newWFValue)\n{\n\tvar oWorkflow = app.g.get_record(\"bpm_workflow\", oldWFValue);\n\n\tapp.g.copy_sw_record(\"bpm_workflow\", oWorkflow, \"\",_swdoc.arrWFSwap);\n\t\/\/-- Clear graphxml\n\tvar strParams = \"&wf=\"+pfu(newWFValue);\n\tapp.g.submitsqs(\"form\/bpm_copy\/delete_graph\", strParams);\n\t\/\/-- copy progress\n\tvar strParams = \"wf=\"+pfu(oldWFValue);\n\tvar aRS = app.g.get_sqrecordset(\"form\/bpm_copy\/get_wf_progress\",strParams);\n\twhile(aRS.Fetch())\n\t{\n\t\tvar oldProgId = app.g.get_field(aRS,\"pk_progid\");\n\t\tvar newProgId = _swdoc.bpm_progress_copy(oldProgId,newWFValue);\n\t\t_swdoc.arrProgress[oldProgId] = newProgId;\n\t}\n\t\/\/-- copy stages\n\tvar strParams = \"wf=\"+pfu(oldWFValue);\n\tvar aRS = app.g.get_sqrecordset(\"form\/bpm_copy\/get_wf_stages\",strParams);\n\twhile(aRS.Fetch())\n\t{\n\t\tvar oldStageId = app.g.get_field(aRS,\"pk_stage_id\");\n\t\tvar newStageId = _swdoc.bpm_stage_copy(oldWFValue,newWFValue,oldStageId)\n\t\t_swdoc.arrStages[oldStageId] = newStageId;\n\t\tif(oldStageId == oWorkflow[\"fk_firststage_id\"])\n\t\t{\n\t\t\tvar strParams = \"sid=\"+pfu(newStageId)+\"&wf=\"+pfu(newWFValue);\n\t\t\tapp.g.submitsqs(\"form\/bpm_copy\/set_first_stage\", strParams);\n\t\t}\n\t}\n\t\/\/-- copy conditions\n\tvar strParams = \"wf=\"+pfu(oldWFValue);\n\tvar aRS = app.g.get_sqrecordset(\"form\/bpm_copy\/get_wf_condition\",strParams);\n\twhile(aRS.Fetch())\n\t{\n\t\tvar oldConditionId = app.g.get_field(aRS,\"pk_condition_id\");\n\t\tvar strNewValue = _swdoc.bpm_condition_copy(oldWFValue,newWFValue,0,0,oldConditionId);\t\n\t}\n\t\/\/-- F0105031 copy audit trail\n\tvar strParams = \"wf=\"+pfu(oldWFValue);\n\tvar aRS = app.g.get_sqrecordset(\"form\/bpm_copy\/get_wf_audit_fields\",strParams);\n\twhile(aRS.Fetch())\n\t{\n\t\tvar oldAuditId = app.g.get_field(aRS,\"pk_auto_id\");\n\t\tvar newAuditId = _swdoc.bpm_audit_copy(oldAuditId,newWFValue);\n\t}\n\t\/\/-- EOF F0105031\n}\n\n\nfunction bpm_stage_copy(oldWFValue,newWFValue,oldStageId)\n{\n\tvar newStageValue = 0;\n\n\tvar oStage = app.g.get_record(\"bpm_stage\", oldStageId);\n\n\tvar arrSwapFields = new Array();\n\tarrSwapFields[\"fk_workflow_id\"]=newWFValue;\n\t\n\tif(_swdoc.intType>0 && _swdoc.intType<2)\n\t{\n\t\t\/\/-- copy status values\n\t\tvar strParams = \"wf=\"+pfu(newWFValue);\n\t\tvar aRS = app.g.get_sqrecordset(\"form\/bpm_copy\/get_max_seq_stages\",strParams);\n\t\tif(aRS.Fetch())\n\t\t{\n\t\t\tvar seqVal = app.g.get_field(aRS,\"seq\");\n\t\t\tseqVal++;\n\t\t\toStage['seq'] = seqVal;\n\t\t}\n\t}\n\n\tvar intTemp = app.g.copy_sw_record(\"bpm_stage\", oStage, \"\",arrSwapFields);\n\tif(intTemp>0)\n\t{\n\t\tarrSwapFields[\"fk_stage_id\"]=intTemp;\n\t\t\/\/-- copy status values\n\t\tvar strParams = \"sid=\"+pfu(oldStageId);\n\t\tvar aRS = app.g.get_sqrecordset(\"form\/bpm_copy\/get_stage_status\",strParams);\n\t\twhile(aRS.Fetch())\n\t\t{\n\t\t\tvar colValue = app.g.get_field(aRS,\"pk_auto_id\");\n\t\t\tvar strNewValue = _swdoc.bpm_status_copy(colValue,intTemp,arrSwapFields);\n\t\t}\n\n\t\t\/\/-- copy authorisers\n\t\tvar aRS = app.g.get_sqrecordset(\"form\/bpm_copy\/get_stage_auths\",strParams);\n\t\twhile(aRS.Fetch())\n\t\t{\n\t\t\tvar colValue = app.g.get_field(aRS,\"pk_auto_id\");\n\t\t\tvar strNewValue = _swdoc.bpm_auth_copy(colValue,intTemp,arrSwapFields);\n\t\t}\n\n\t\t\/\/-- copy tasks\n\t\tvar aRS = app.g.get_sqrecordset(\"form\/bpm_copy\/get_stage_tasks\",strParams);\n\t\twhile(aRS.Fetch())\n\t\t{\n\t\t\tvar colValue = app.g.get_field(aRS,\"pk_auto_id\");\n\t\t\tvar strNewValue = _swdoc.bpm_task_copy(colValue,intTemp,arrSwapFields);\n\t\t}\n\n\t\treturn intTemp;\n\t}\n\treturn newStageValue;\n}\n\nfunction bpm_progress_copy(strValue,newWFValue)\n{\n\tvar newStageValue = 0;\n\n\tvar oProgress = app.g.get_record(\"bpm_progress\", strValue);\n\n\tvar arrSwapFields = new Array();\n\tarrSwapFields[\"fk_workflow_id\"]=newWFValue;\n\n\tvar intTemp = app.g.copy_sw_record(\"bpm_progress\", oProgress, \"\",arrSwapFields);\n\tif(intTemp>0)\n\t\treturn intTemp;\n\treturn newStageValue;\n}\n\nfunction bpm_auth_copy(strValue,newWFValue,arrSwapFields)\n{\n\tvar newStageValue = 0;\n\n\tvar oProgress = app.g.get_record(\"bpm_stage_auth\", strValue);\n\tif(arrSwapFields==undefined)\n\t\tvar arrSwapFields = new Array();\n\/\/\tarrSwapFields[\"fk_workflow_id\"]=newWFValue;\n\n\tvar intTemp = app.g.copy_sw_record(\"bpm_stage_auth\", oProgress, \"\",arrSwapFields);\n\tif(intTemp>0)\n\t\treturn intTemp;\n\treturn newStageValue;\n}\n\nfunction bpm_task_copy(strValue,newWFValue,arrSwapFields)\n{\n\tvar newStageValue = 0;\n\n\tvar oProgress = app.g.get_record(\"bpm_stage_task\", strValue);\n\tif(arrSwapFields==undefined)\n\t\tvar arrSwapFields = new Array();\n\n\tvar intTemp = app.g.copy_sw_record(\"bpm_stage_task\", oProgress, \"\",arrSwapFields);\n\tif(intTemp>0)\n\t\treturn intTemp;\n\treturn newStageValue;\n}\n\nfunction bpm_condition_copy(oldWFValue,newWFValue,oldStageId,newStageId,oldConditionId)\n{\n\tvar newStageValue = 0;\n\tvar strParams = \"_swc_fk_stage_id=\"+pfu(oldStageId);\n\t\n\tif(oldConditionId>0)\n\t\tstrParams = \"_swc_pk_condition_id=\"+pfu(oldConditionId);\n\n\tvar aRS = app.g.get_sqrecordset(\"form\/bpm_copy\/get_conditions\",strParams);\n\twhile(aRS.Fetch())\n\t{\n\t\toldConditionId = app.g.get_field(aRS,\"pk_condition_id\");\n\n\t\tvar oProgress = app.g.get_record(\"bpm_cond\", oldConditionId);\n\t\tif(arrSwapFields==undefined)\n\t\t\tvar arrSwapFields = new Array();\n\t\tarrSwapFields[\"fk_workflow_id\"]=newWFValue;\n\t\n\t\tif(_swdoc.intType==2)\n\t\t{\n\t\t\tif(oProgress['set_progress_fail']>0)oProgress['set_progress_fail'] = _swdoc.arrProgress[oProgress['set_progress_fail']];\n\t\t\tif(oProgress['set_progress']>0)oProgress['set_progress'] = _swdoc.arrProgress[oProgress['set_progress']];\n\t\t\tif(oProgress['set_workflow']!=\"\")oProgress['set_workflow'] = _swdoc.arrWFSwap[oProgress['set_workflow']];\n\t\t\tif(oProgress['set_stage']>0)oProgress['set_stage'] = _swdoc.arrStages[oProgress['set_stage']];\n\t\t\tif(oProgress['fk_stage_id']>0)oProgress['fk_stage_id'] = _swdoc.arrStages[oProgress['fk_stage_id']];\n\t\t}\n\t\telse\n\t\t{\n\t\t\toProgress['set_progress_fail']=0;\n\t\t\toProgress['set_progress']=0;\n\t\t\toProgress['set_workflow']=\"\";\n\t\t\toProgress['set_stage']=0;\n\t\t\toProgress['fk_stage_id']=newStageId;\n\t\t}\n\t\n\t\tvar intTemp = app.g.copy_sw_record(\"bpm_cond\", oProgress, \"\",arrSwapFields);\n\t\tif(intTemp>0)\n\t\t{\n\t\t\tarrSwapFields[\"fk_cond_id\"]=intTemp;\n\t\t\t\/\/-- copy authorisers\n\t\t\tvar strParams = \"cid=\"+pfu(oldConditionId);\n\t\t\tvar oRS = app.g.get_sqrecordset(\"form\/bpm_copy\/get_condition_vpmes\",strParams);\n\t\t\twhile(oRS.Fetch())\n\t\t\t{\n\t\t\t\tvar colValue = app.g.get_field(oRS,\"pk_auto_id\");\n\t\t\t\tvar strNewValue = _swdoc.bpm_vpme_copy(colValue,intTemp,arrSwapFields);\n\t\t\t}\n\t\t}\n\t}\t\n\treturn newStageValue;\n}\n\nfunction bpm_vpme_copy(strValue,newWFValue,arrSwapFields)\n{\n\tvar newStageValue = 0;\n\tvar oProgress = app.g.get_record(\"bpm_cond_vpme\", strValue);\n\tif(arrSwapFields==undefined)\n\t\tvar arrSwapFields = new Array();\n\n\tvar intTemp = app.g.copy_sw_record(\"bpm_cond_vpme\", oProgress, \"\",arrSwapFields);\n\n\tif(intTemp>0)\n\t\treturn intTemp;\n\treturn newStageValue;\n}\n\nfunction bpm_status_copy(strValue,newWFValue,arrSwapFields)\n{\n\tvar newStageValue = 0;\n\n\tvar oProgress = app.g.get_record(\"bpm_stage_sts\", strValue);\n\tif(arrSwapFields==undefined)\n\t\tvar arrSwapFields = new Array();\n\n\tvar intTemp = app.g.copy_sw_record(\"bpm_stage_sts\", oProgress, \"\",arrSwapFields);\n\n\tif(intTemp>0)\n\t\treturn intTemp;\n\treturn newStageValue;\n}\n\n\/\/-- F0105031 copy audit fields\nfunction bpm_audit_copy(strValue,newWFValue)\n{\n\tvar newAuditValue = 0;\n\n\tvar oAudit = app.g.get_record(\"bpm_audit_fields\", strValue);\n\n\tvar arrSwapFields = new Array();\n\tarrSwapFields[\"fk_workflow_id\"]=newWFValue;\n\n\tvar intTemp = app.g.copy_sw_record(\"bpm_audit_fields\", oAudit, \"\",arrSwapFields);\n\tif(intTemp>0)\n\t\treturn intTemp;\n\treturn newAuditValue;\n}\n\/\/-- EOF F0105031"}}}},"layouts":{"layout":[{"appearance":{"width":"657","height":"125","backgroundColor":"#ffffff","fillColour":"#ffffff","textColour":"#000000","font":{"@size":"8","#text":"Arial"}},"controls":{"control":[{"general":{"name":"src_process","type":"Field"},"appearance":{"index":"0","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"18","left":"100","right":"300","bottom":"36"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"controlInfo":{"mouseOverCursor":"Window Default","type":"Distinct Pick List","flags":{"invisible":"false","readOnly":"false","mandatory":"true","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","comboAutoUpdate":"false","comboNewValues":"true","pickListOrderDesc":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"borderColor":"#c0c0c0","image":"#eeeeee","disabledBackgroundColor":"#eeeeee","sqlSource":"swdata","distinctTable":"bpm_workflow","distinctColumn":"pk_workflow_id","storedQuery":"requests.filter_bpm_selection"}}},{"general":{"name":"src_stage","type":"Field"},"appearance":{"index":"1","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"40","left":"100","right":"300","bottom":"58"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"controlInfo":{"mouseOverCursor":"Window Default","type":"Distinct Pick List","flags":{"invisible":"false","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"true","protected":"false","noMacroExpand":"false","readOnlyInit":"false","comboAutoUpdate":"false","comboNewValues":"true","pickListOrderDesc":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"borderColor":"#c0c0c0","image":"#eeeeee","sqlSource":"swdata","distinctTable":"bpm_stage","distinctColumn":"title","disabledBackgroundColor":"#eeeeee","storedQuery":"common.filterByTableValues"}}},{"general":{"name":"src_condition","type":"Field"},"appearance":{"index":"2","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"63","left":"100","right":"300","bottom":"81"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"controlInfo":{"mouseOverCursor":"Window Default","type":"Distinct Pick List","flags":{"invisible":"false","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"true","protected":"false","noMacroExpand":"false","readOnlyInit":"false","comboAutoUpdate":"false","comboNewValues":"true","pickListOrderDesc":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"borderColor":"#c0c0c0","image":"#eeeeee","sqlSource":"swdata","distinctTable":"bpm_cond","distinctColumn":"title","disabledBackgroundColor":"#eeeeee","storedQuery":"common.filterByTableValues"}}},{"general":{"name":"dst_process","type":"Field"},"appearance":{"index":"3","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"18","left":"437","right":"637","bottom":"36"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"controlInfo":{"mouseOverCursor":"Window Default","type":"Distinct Pick List","flags":{"invisible":"false","readOnly":"false","mandatory":"true","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","comboAutoUpdate":"false","comboNewValues":"false","pickListOrderDesc":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"borderColor":"#c0c0c0","image":"#eeeeee","disabledBackgroundColor":"#eeeeee","sqlSource":"swdata","distinctTable":"bpm_workflow","distinctColumn":"pk_workflow_id","storedQuery":"requests.filter_bpm_selection"}}},{"general":{"name":"dst_stage","type":"Field"},"appearance":{"index":"4","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"40","left":"437","right":"637","bottom":"58"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"controlInfo":{"mouseOverCursor":"Window Default","type":"Distinct Pick List","flags":{"invisible":"false","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"true","protected":"false","noMacroExpand":"false","readOnlyInit":"false","comboAutoUpdate":"false","comboNewValues":"true","pickListOrderDesc":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"borderColor":"#c0c0c0","image":"#eeeeee","sqlSource":"swdata","distinctTable":"bpm_stage","distinctColumn":"title","disabledBackgroundColor":"#eeeeee","storedQuery":"common.filterByTableValues"}}},{"general":{"name":"dst_condition","type":"Field"},"appearance":{"index":"5","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"63","left":"437","right":"637","bottom":"81"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"controlInfo":{"mouseOverCursor":"Window Default","type":"Distinct Pick List","flags":{"invisible":"true","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"true","protected":"false","noMacroExpand":"false","readOnlyInit":"false","comboAutoUpdate":"false","comboNewValues":"false","pickListOrderDesc":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"borderColor":"#c0c0c0","image":"#eeeeee","sqlSource":"swdata","distinctTable":"bpm_cond","distinctColumn":"pk_condition_id","displayColumn":"title","disabledBackgroundColor":"#eeeeee","storedQuery":"common.filterByTableValues"}}},{"general":{"name":"btn_copy","type":"EventButton"},"appearance":{"index":"6","caption":"Copy","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"}},"objectPlacement":{"position":{"top":"90","left":"474","right":"554","bottom":"116"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"controlInfo":{"mouseOverCursor":"Window Default","properties":{"backgroundColor":"#ff9900"}}},{"general":{"name":"btn_cancel","type":"EventButton"},"appearance":{"index":"7","caption":"Cancel","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"}},"objectPlacement":{"position":{"top":"90","left":"558","right":"638","bottom":"116"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"controlInfo":{"mouseOverCursor":"Window Default","properties":{"backgroundColor":"#ff9900"}}},{"general":{"name":"Text1","type":"Text","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"8","caption":"Source Process","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"18","left":"9","right":"96","bottom":"36"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"Text2","type":"Text","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"9","caption":"Source Stage","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"40","left":"9","right":"96","bottom":"58"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"Text3","type":"Text","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"10","caption":"Source Condition","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"63","left":"9","right":"96","bottom":"81"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"Text4","type":"Text","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"11","caption":"Destination Process","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"18","left":"306","right":"433","bottom":"36"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"Text5","type":"Text","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"12","caption":"Destination Stage","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"40","left":"306","right":"433","bottom":"58"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"Text6","type":"Text","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"13","caption":"Destination Condition","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"63","left":"306","right":"433","bottom":"81"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"controlInfo":{"mouseOverCursor":"Window Default","flags":{"invisible":"true","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","multiLine":"false"}}}]},"javascript":{"methods":{"method":[{"name":"btn_copy_OnPressed","code":"btn_copy_OnPressed()\n{\n\t\/\/ TODO: Add your event handler code here\n\t_swdoc.bpm_process_copy();\n\n}"},{"name":"src_process_OnValueChanged","code":"src_process_OnValueChanged(strValue)\n{\n\t\/\/ TODO: Add your event handler code here\n\tif(strValue!=\"\")\n\t{\n\t\t_slf(src_stage,\"_swc_fk_workflow_id=\"+pfu(strValue));\n\t\t_eva(src_stage,\"\");\n\t\t_een(src_stage,true);\n\t\t_eva(src_condition,\"\");\n\t\t_een(src_condition,false);\n\t\n\t}\n\telse\n\t{\n\t\t_een(src_stage,false);\n\t\t_eva(src_stage,\"\");\n\t\t_eva(src_condition,\"\");\n\t\t_ete(src_stage,\"\");\n\t\t_ete(src_condition,\"\");\n\t}\n\t\n\/\/\t_swdoc.UpdateFormFromData();\n\n}"},{"name":"OnFormLoaded","code":"OnFormLoaded(bDataReloaded)\n{\n\t\/\/ TODO: Add your event handler code here\n\tvar src_workflow = _swdoc.GetArg(\"src_workflow\");\n\tif(src_workflow!=\"\")\n\t{\n\t\t_eva(mainform.src_process,src_workflow);\n\t\t_een(mainform.src_stage,true);\n\t\t_slf(mainform.src_stage,\"_swc_fk_workflow_id=\"+pfu(src_workflow));\n\t}\n\t\n\tvar src_stage = _swdoc.GetArg(\"src_stage\");\n\tif(src_stage!=\"\")\n\t{\n\t\t_eva(mainform.src_stage,src_stage);\n\t\t_een(mainform.src_stage,true);\n\t\t_een(mainform.src_condition,true);\n\t}\n\n\tvar src_condition = _swdoc.GetArg(\"src_condition\");\n\tif(src_condition!=\"\")\n\t{\n\t\t_eva(mainform.src_condition,src_condition);\n\t\t_een(mainform.src_stage,true);\n\t\t_een(mainform.src_condition,true);\n\t}\n}"},{"name":"dst_process_OnValueChanged","code":"dst_process_OnValueChanged(strValue)\n{\n\t\/\/ TODO: Add your event handler code here\n\tif(strValue!=\"\")\n\t{\n\t\t\/\/-- F0104899\n\t\tvar strParams = \"wf=\"+pfu(strValue);\n\t\tvar intCount = app.g.sqs_rowcount(\"form\/bpm_copy\/cnt_bpm\", strParams);\n\t\tif(intCount<1)\n\t\t{\n\t\t\t_een(dst_stage,false);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t_slf(dst_stage,\"_swc_fk_workflow_id=\"+pfu(strValue));\n\t\t\t_een(dst_stage,true);\n\t\t}\n\t\t_eva(dst_stage,\"\");\n\t}\n\telse\n\t{\n\t\t_een(dst_stage,false);\n\t}\n\n\n}"},{"name":"src_stage_OnValueChanged","code":"src_stage_OnValueChanged(strValue)\n{\n\t\/\/ TODO: Add your event handler code here\n\tif(strValue!=\"\")\n\t{\n\t\tvar oRec = app.g.get_sqrecordset(\"form\/bpm_copy\/get_stage\", \"_swc_title=\"+pfu(strValue)+\"&\"+src_stage.filter);\n\t\tif(oRec.Fetch())\n\t\t{\n\t\t\tvar strStageId = app.g.get_field(oRec, \"pk_stage_id\"); \n\t\t\t_slf(src_condition,\"_swc_fk_stage_id=\"+pfu(strStageId));\n\t\t\t_een(src_condition,true);\n\t\t\t_eva(src_condition,\"\");\n\t\t}\n\t\n\t}\n\telse\n\t{\n\t\t_een(src_condition,false);\n\t\t_eva(src_condition,\"\");\n\t}\n\n}"},{"name":"btn_cancel_OnPressed","code":"btn_cancel_OnPressed()\n{\n\t\/\/ TODO: Add your event handler code here\n\t_swdoc.CloseForm();\n\n}"}]}}},{"appearance":{"width":"360","height":"220","backgroundColor":"#ffffff","fillColour":"#ffffff","textColour":"#000000","font":{"@size":"8","#text":"Arial"}},"javascript":{}}]}}}