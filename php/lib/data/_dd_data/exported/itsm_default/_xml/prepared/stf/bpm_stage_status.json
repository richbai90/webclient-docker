{"espForm":{"configuration":{"settings":{"name":"bpm_stage_status","title":"Stage Status Value","options":{"allowResize":"true","showMenubar":"false","showToolbar":"true","showStatusBar":"false"}},"tables":{"table":{"name":"bpm_stage_sts","type":"Main Details Table","flags":"0"}},"javascript":{"methods":{"method":[{"name":"(Globals)","code":"var strCurrentStatus = \"\";\n\nfunction SSTATUS()\n{\n\treturn _swdoc.bpm_stage_sts;\n}\n\nfunction MF()\n{\n\treturn mainform;\n}"},{"name":"OnFormLoaded","code":"OnFormLoaded(strFormName, strclass)\n{\n\t\/\/ TODO: Add your event handler code here\n\t_swdoc.SetTitle(\"Stage Status Value - \" + _swdoc.SSTATUS().fk_workflow_id);\n\n}"}]}}},"layouts":{"layout":[{"appearance":{"width":"399","height":"63","backgroundColor":"#ffffff","fillColour":"#ffffff","textColour":"#000000","font":{"@size":"8","#text":"Arial"}},"controls":{"control":[{"general":{"type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"0","caption":"Status","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"24","left":"-5","right":"74","bottom":"42"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"bpm_stage_sts.status"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"fld_status","type":"Field"},"appearance":{"index":"1","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"24","left":"79","right":"385","bottom":"42"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"bpm_stage_sts.status"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","sqlSource":"swdata","distinctTable":"bpm_stage_sts","distinctColumn":"status","listFilter":"fk_workflow_id = '&[bpm_stage_sts.fk_workflow_id]'"}}}]},"javascript":{"methods":{"method":[{"name":"OnFormLoaded","code":"OnFormLoaded()\n{\n\tvar boolUpdate = (_swdoc.SSTATUS().pk_auto_id!=0);\n\tif(boolUpdate)\n\t{\n\t\t\/\/-- updating\n\t\t_swdoc.strCurrentStatus = _swdoc.SSTATUS().status;\n\t}\n\telse\n\t{\n\t\t_swdoc.SSTATUS().fk_workflow_id = _swdoc.GetArg(\"fk_workflow_id\");\n\t\t_swdoc.SSTATUS().fk_stage_id = _swdoc.GetArg(\"fk_stage_id\");\n\n\t}\n\t\n\t\/\/-- set form modified to false as users complain about closing forms and getting prompted to save \/ cancel when they\n\t\/\/-- havent done anything.\n\t_swdoc.ResetModiedFlag(\"bpm_stage_sts\");\n\n}"},{"name":"fld_status_OnValueChanged","code":"fld_status_OnValueChanged(strValue)\n{\n\t\/\/ TODO: Add your event handler code here\n\tvar oParams = {};\n\toParams.sid = _swdoc.SSTATUS().fk_stage_id;\n\toParams.sts = strValue;\n\toParams.pid = _swdoc.SSTATUS().pk_auto_id;\n\tvar intRowCount = app.g.staticfilter_rowcount(\"bpm_stage_sts\", \"bpm_stage_status.fld_status\", oParams);\n\tif(intRowCount>0)\n\t{\n\t\tMessageBox(\"A status of \"+strValue+\" has already been defined for this stage.\");\n\t\t_swdoc.SSTATUS().status = _swdoc.strCurrentStatus;\n\t\t_swdoc.UpdateFormFromData();\n\t\treturn false;\n\t}\n\telse\n\t{\n\t\t_swdoc.strCurrentStatus = strValue;\n\t}\n\t\n}"}]}}},{"appearance":{"width":"360","height":"220","backgroundColor":"#ffffff","fillColour":"#ffffff","textColour":"#000000","font":{"@size":"8","#text":"Arial"}},"javascript":{}}]}}}