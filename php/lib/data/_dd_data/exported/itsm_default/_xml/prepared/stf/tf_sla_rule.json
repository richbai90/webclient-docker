{"espForm":{"configuration":{"settings":{"name":"tf_sla_rule","title":"SLA Rule","options":{"allowResize":"true","showMenubar":"false","showToolbar":"true","showStatusBar":"false"}},"tables":{"table":{"name":"itsm_sla_rules","type":"Main Details Table","flags":"0"}},"javascript":{"methods":{"method":[{"name":"OnSaveData","code":"OnSaveData()\n{\n\tvar arrParams ={};\n\tarrParams.callclass=_swdoc.oRule().callclass;\n\tarrParams.rulename=_swdoc.oRule().rulename;\n\tif(app.g.sqs_rowcountbycol(\"ITSM_SLA_RULES\",arrParams)==0)\n\t{\n\t\treturn true;\n\t}\n\telse\n\t{\n\t\tMessageBox(\"A rule for '\" + _swdoc.oRule().callclass + \"' and '\" + _swdoc.oRule().rulename + \"' already exists.\");\n\t\treturn false;\n\t}\n}"},{"name":"(Globals)","code":"var _swdoc = (IsObjectDefined(\"_bHtmlWebClient\"))?top:_swdoc;\n\nfunction oRule()\n{\n\treturn _swdoc.itsm_sla_rules;\n}\n\nfunction MF()\n{\n\treturn _swdoc.mainform;\n}"}]}}},"layouts":{"layout":[{"appearance":{"width":"390","height":"150","backgroundColor":"#ffffff","fillColour":"#ffffff","textColour":"#000000","font":{"@size":"8","#text":"Arial"}},"controls":{"control":[{"general":{"name":"lbl_callclass","type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"0","caption":"Callclass","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"10","left":"10","right":"120","bottom":"26"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"itsm_sla_rules.callclass"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"fld_callclass","type":"Field"},"appearance":{"index":"1","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"10","left":"130","right":"380","bottom":"26"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"itsm_sla_rules.callclass"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Text Edit","flags":{"invisible":"false","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"true","protected":"false","noMacroExpand":"false","readOnlyInit":"false","autoCompleteField":"false","editUnlimitedText":"false","url":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","borderColor":"#c0c0c0"}}},{"general":{"name":"lbl_sla","type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"2","caption":"Longest Sla","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"54","left":"10","right":"120","bottom":"70"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"itsm_sla_rules.longest_sla"},"controlInfo":{"mouseOverCursor":"Window Default","flags":{"invisible":"true","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","multiLine":"false"}}},{"general":{"name":"fld_sla","type":"Field"},"appearance":{"index":"3","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"54","left":"130","right":"380","bottom":"70"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"itsm_sla_rules.longest_sla"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Pick List","flags":{"invisible":"true","readOnly":"false","mandatory":"false","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","comboAutoUpdate":"false","comboNewValues":"true","useDDPickList":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","borderColor":"#c0c0c0","listItems":"Longest|Shortest|"}}},{"general":{"name":"lbl_rule","type":"FieldName","flags":{"transparent":"true","xpStyle":"false","hasShadow":"false","toolbarButtonStyle":"false","cache":"false","hasBorder":"false","hasCheckbox":"false"}},"appearance":{"index":"4","caption":"Rule","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"alignment":"Right","borderStyle":"None","fillStyle":"Solid"},"objectPlacement":{"position":{"top":"32","left":"10","right":"120","bottom":"48"},"scaling":{"top":"0","left":"0","right":"0","bottom":"0"}},"data":{"binding":"itsm_sla_rules.sla_rule"},"controlInfo":{"mouseOverCursor":"Window Default"}},{"general":{"name":"gld_rule","type":"Field"},"appearance":{"index":"5","backgroundColor":"#ffffff","foregroundColor":"#000000","font":{"@size":"8","#text":"Arial"},"borderStyle":"Rectangle"},"objectPlacement":{"position":{"top":"32","left":"130","right":"380","bottom":"48"},"scaling":{"top":"0","left":"0","right":"100","bottom":"0"}},"data":{"binding":"itsm_sla_rules.sla_rule"},"controlInfo":{"mouseOverCursor":"Window Default","type":"Distinct Pick List","flags":{"invisible":"false","readOnly":"false","mandatory":"true","mandatoryLabelBackground":"false","mandatoryLabelText":"false","allowNullValue":"false","skipTabStop":"false","disabled":"false","protected":"false","noMacroExpand":"false","readOnlyInit":"false","comboAutoUpdate":"false","comboNewValues":"true","pickListOrderDesc":"false"},"textLineCount":"0","textInputFormat":"Text","properties":{"disabledBackgroundColor":"#eeeeee","borderColor":"#c0c0c0","sqlSource":"swdata","distinctTable":"swlists","distinctColumn":"value","displayColumn":"display_name","listFilter":"list_id = 'SLA-RULETYPES'"}}}]},"javascript":{"methods":{"method":[{"name":"gld_rule_OnValueChanged","code":"gld_rule_OnValueChanged(strValue)\n{\n\tif(((strValue == \"SERV\" || strValue == \"SUBS\" || strValue == \"CITM\") && itsm_sla_rules.callclass != \"Service Request\") || (strValue == \"CITM\"  && itsm_sla_rules.callclass == \"Service Request\"))\n\t{\n\t\tapp._ema(mainform.fld_sla, true);\t\n\t\tapp._evi(mainform.fld_sla, true);\t\n\t\tapp._evi(mainform.lbl_sla, true);\t\n\t}\n\telse\n\t{\n\t\tapp._ema(mainform.fld_sla, false);\t\n\t\tapp._evi(mainform.fld_sla, false);\t\n\t\tapp._evi(mainform.lbl_sla, false);\t\n\t}\n\t\t\n\tif(strValue != \"CITM\" && strValue != \"SERV\" && strValue != \"SUBS\")\n\t{\n\t\titsm_sla_rules.longest_sla = \"\"\n\t\t_swdoc.UpdateFormFromData();\n\t}\n\t\n\tvar aParams = {};\n    aParams.list_id = \"SLA-RULETYPES\";\n    app._eva(aParams , strValue);\n\tvar o = app.g.submitsqp(strStoredQuery, strParams)\n    var oRS = app.g.get_tablerecordset_bycol(\"swlists\",aParams,false,\"display_name\");\n    while(oRS.Fetch())\n    {\n\t\titsm_sla_rules.rulename = app.g.get_field(oRS,\"display_name\");\n\t\t_swdoc.UpdateFormFromData();\n    }\n\n}"},{"name":"OnFormLoaded","code":"OnFormLoaded(bDataReloaded)\n{\n\t_swdoc.boolInserting = (itsm_sla_rules.pk_auto_id==\"\");\n\tif(_swdoc.boolInserting)\n\t{\n\t\titsm_sla_rules.seq = _swdoc.GetArg(\"seq\");\n\t\titsm_sla_rules.callclass = _swdoc.GetArg(\"callclass\");\n\t\titsm_sla_rules.appcode = app.itsm.get_session_param(\"dataset\");\n\t\tmainform.UpdateFormFromData();\n\t}\n\t\t\n}"}]}}},{"appearance":{"width":"360","height":"220","backgroundColor":"#ffffff","fillColour":"#ffffff","textColour":"#000000","font":{"@size":"8","#text":"Arial"}},"javascript":{}}]}}}